<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Configuring</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Learn how to configure Red Hat Developer Hub by adding custom configuration files."/><link rel="next" href="#idm45837644261648" title="Preface"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm45837644202448"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.4</span></div><div><h1 class="title">Configuring</h1></div><div><h2 class="subtitle">Configuring Red Hat Developer Hub</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm45837625666576">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Learn how to configure Red Hat Developer Hub by adding custom configuration files.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#idm45837644261648">Preface</a></span></li><li><span class="chapter"><a href="#authoring-custom-configuration-files">1. Authoring custom Red Hat Developer Hub configuration files</a></span><ul><li><span class="section"><a href="#proc-authoring-the-main-configuration-file">1.1. Authoring the main Red Hat Developer Hub configuration file</a></span></li><li><span class="section"><a href="#proc-authoring-optional-configuration-files">1.2. Authoring optional Red Hat Developer Hub configuration files</a></span></li></ul></li><li><span class="chapter"><a href="#adding-custom-configuration-files">2. Adding custom configuration files to Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#proc-add-custom-app-config-file-ocp-operator_adding-custom-configuration-files">2.1. Adding custom Red Hat Developer Hub configuration files by using the operator</a></span></li><li><span class="section"><a href="#proc-add-custom-app-file-openshift-helm_adding-custom-configuration-files">2.2. Adding custom Red Hat Developer Hub configuration files by using the Helm chart</a></span></li></ul></li></ul></div><section class="preface" id="idm45837644261648"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>
			Learn how to configure Red Hat Developer Hub by adding custom configuration files.
		</p></section><section class="chapter" id="authoring-custom-configuration-files"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Authoring custom Red Hat Developer Hub configuration files</h1></div></div></div><p>
			To configure Red Hat Developer Hub, author your custom Red Hat Developer Hub configuration files before deploying Red Hat Developer Hub.
		</p><p>
			Red Hat Developer Hub installs a default configuration that is not suitable for production use, and that you cannot edit after installation. Both the operator and Helm revert your manual changes
		</p><p>
			Prepare your custom configuration file before deploying Developer Hub.
		</p><section class="section" id="proc-authoring-the-main-configuration-file"><div class="titlepage"><div><div><h2 class="title">1.1. Authoring the main Red Hat Developer Hub configuration file</h2></div></div></div><p>
				The main Red Hat Developer Hub configuration file is the <code class="literal">app-config.yaml</code> file.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Author the Developer Hub general configuration in the <code class="literal">app</code> section.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">title</span></dt><dd><p class="simpara">
									Enter your Developer Hub instance display name, such as <span class="emphasis"><em>&lt;Red Hat Developer Hub&gt;</em></span>.
								</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code> excerpt</strong></p><p>
										
<pre class="programlisting language-yaml">app:
  title: Red Hat Developer Hub</pre>
									</p></div></dd><dt><span class="term">baseURL</span></dt><dd><p class="simpara">
									Enter the external URL of your Red Hat Developer Hub instance, such as https://<span class="emphasis"><em>&lt;my_developer_hub_url&gt;</em></span>.
								</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code> example</strong></p><p>
										
<pre class="programlisting language-yaml">app:
  baseUrl: https://<span class="emphasis"><em>&lt;my_developer_hub_url&gt;</em></span></pre>
									</p></div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Author the Developer Hub backend configuration in the <code class="literal">backend</code> section.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">auth</span></dt><dd>
									Enter your authentication configuration. See <a class="link" href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.4/html-single/authentication/index">Authentication</a>.
								</dd><dt><span class="term">baseURL</span></dt><dd><p class="simpara">
									Enter the external URL of your Red Hat Developer Hub instance, such as https://<span class="emphasis"><em>&lt;my_developer_hub_url&gt;</em></span>.
								</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code> example</strong></p><p>
										
<pre class="programlisting language-yaml">backend:
  baseUrl: https://<span class="emphasis"><em>&lt;my_developer_hub_url&gt;</em></span>
  cors:
    origin: &lt;RHDH_URL&gt;</pre>
									</p></div></dd></dl></div></li><li class="listitem">
						Optionally, to configure authorization, author the <code class="literal">permission</code> section. See <a class="link" href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.4/html-single/authorization/index">Authorization</a>.
					</li></ol></div></section><section class="section" id="proc-authoring-optional-configuration-files"><div class="titlepage"><div><div><h2 class="title">1.2. Authoring optional Red Hat Developer Hub configuration files</h2></div></div></div><p>
				You might need to author optional configuration files.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Optionally, to enable dynamic plugins, author the <code class="literal">dynamic-plugins.yaml</code> file. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.4/html-single/installing_and_viewing_dynamic_plugins/index">Installing and viewing dynamic plugins</a>.
					</li><li class="listitem">
						Optionally, to configure authorization by using external files, author the <code class="literal">policy.csv</code> and <code class="literal">rbac-policy.yaml</code> files. See <a class="link" href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.4/html-single/authorization/index">Authorization</a>.
					</li></ol></div></section></section><section class="chapter" id="adding-custom-configuration-files"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Adding custom configuration files to Red Hat Developer Hub</h1></div></div></div><p>
			To configure Red Hat Developer Hub, add custom configuration files to Red Hat OpenShift Container Platform and register them in Developer Hub.
		</p><section class="section" id="proc-add-custom-app-config-file-ocp-operator_adding-custom-configuration-files"><div class="titlepage"><div><div><h2 class="title">2.1. Adding custom Red Hat Developer Hub configuration files by using the operator</h2></div></div></div><p>
				A custom application configuration file is a <code class="literal">ConfigMap</code> object that you can use to change the configuration of your Red Hat Developer Hub instance. If you are deploying your Developer Hub instance on Red Hat OpenShift Container Platform, you can use the Red Hat Developer Hub Operator to add a custom application configuration file to your OpenShift Container Platform instance by creating the <code class="literal">ConfigMap</code> object and referencing it in the Developer Hub custom resource (CR).
			</p><p>
				The custom application configuration file contains a sensitive environment variable, named <code class="literal">BACKEND_SECRET</code>. This variable contains a mandatory backend authentication key that Developer Hub uses to reference an environment variable defined in an OpenShift Container Platform secret. You must create a secret, named 'secrets-rhdh', and reference it in the Developer Hub CR.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You are responsible for protecting your Red Hat Developer Hub installation from external and unauthorized access. Manage the backend authentication key like any other secret. Meet strong password requirements, do not expose it in any configuration files, and only inject it into configuration files as an environment variable.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#authoring-custom-configuration-files" title="Chapter 1. Authoring custom Red Hat Developer Hub configuration files">You have authored custom configuration files</a>.
					</li><li class="listitem">
						You have an active Red Hat OpenShift Container Platform account.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.4/html-single/administration_guide_for_red_hat_developer_hub/index">Your administrator has installed the Red Hat Developer Hub Operator in OpenShift Container Platform</a>.
					</li><li class="listitem">
						You have created an OpenShift Container Platform project, named <code class="literal"><span class="emphasis"><em>&lt;RHDH&gt;</em></span></code>, to contain the Developer Hub instance.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Topology</strong></span> view, and click the <span class="strong strong"><strong>Open URL</strong></span> icon on the Developer Hub pod to identify your Developer Hub external URL: <span class="emphasis"><em>&lt;RHDH_URL&gt;</em></span>.
					</li><li class="listitem"><p class="simpara">
						Upload your custom configuration files to OpenShift Container Platform config maps, in your <code class="literal"><span class="emphasis"><em>&lt;RHDH&gt;</em></span></code> project.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>ConfigMaps</strong></span> view.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create ConfigMap</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create your OpenShift Container Platform secrets.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select the <span class="strong strong"><strong>Secrets</strong></span> view.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create Key/value Secret</strong></span>.
							</li><li class="listitem">
								Create a secret named <code class="literal">secrets-rhdh</code>.
							</li><li class="listitem"><p class="simpara">
								Add a key named <code class="literal">BACKEND_SECRET</code> and a base64 encoded string as a value. Use a unique value for each Red Hat Developer Hub instance. For example, you can use the following command to generate a key from your terminal:
							</p><pre class="programlisting language-yaml">node -p 'require("crypto").randomBytes(24).toString("base64")'</pre></li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the Developer Hub custom resource
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select the <span class="strong strong"><strong>Topology</strong></span> view.
							</li><li class="listitem"><p class="simpara">
								Click the overflow menu for the Red Hat Developer Hub instance that you want to use and select <span class="strong strong"><strong>Edit Backstage</strong></span> to load the YAML view of the Red Hat Developer Hub instance.
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/images/rhdh/operator-install-2.png" alt="operator install 2"/></div></div></li><li class="listitem"><p class="simpara">
								In the CR, enter the name of the custom application configuration config map as the value for the <code class="literal">spec.application.appConfig.configMaps</code> field, and enter the name of your secret as the value for the <code class="literal">spec.application.extraEnvs.secrets</code> field. For example:
							</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha1
kind: Backstage
metadata:
  name: developer-hub
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: app-config
    extraEnvs:
      secrets:
         - name: secrets-rhdh
    extraFiles:
      mountPath: /opt/app-root/src
    replicas: 1
    route:
      enabled: true
  database:
    enableLocalDb: true</pre></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li><li class="listitem">
								Navigate back to the <span class="strong strong"><strong>Topology</strong></span> view and wait for the Red Hat Developer Hub pod to start.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Open URL</strong></span> icon to use the Red Hat Developer Hub platform with the configuration changes.
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about roles and responsibilities in Developer Hub, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.4/html-single/administration_guide_for_red_hat_developer_hub/index">Role-Based Access Control (RBAC) in Red Hat Developer Hub</a>.
					</li></ul></div></section><section class="section" id="proc-add-custom-app-file-openshift-helm_adding-custom-configuration-files"><div class="titlepage"><div><div><h2 class="title">2.2. Adding custom Red Hat Developer Hub configuration files by using the Helm chart</h2></div></div></div><p>
				You can use the Red Hat Developer Hub Helm chart to add a custom application configuration file to your OpenShift Container Platform instance.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#authoring-custom-configuration-files" title="Chapter 1. Authoring custom Red Hat Developer Hub configuration files">You have authored custom configuration files</a>.
					</li><li class="listitem">
						You have created an Red Hat OpenShift Container Platform account.
					</li><li class="listitem">
						You have created an OpenShift Container Platform project, named <code class="literal"><span class="emphasis"><em>&lt;RHDH&gt;</em></span></code>, to contain the Developer Hub instance.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Upload your custom configuration files to OpenShift Container Platform config maps, in your <code class="literal"><span class="emphasis"><em>&lt;RHDH&gt;</em></span></code> project.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								From the OpenShift Container Platform web console, select the <span class="strong strong"><strong>ConfigMaps</strong></span> tab.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create ConfigMap</strong></span> to create the <code class="literal">app-config</code> config map.
							</li><li class="listitem">
								From <span class="strong strong"><strong>Create ConfigMap</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span> and make changes to the file, if needed.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Configure Helm to use your custom configuration files in Developer Hub.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Go to the <span class="strong strong"><strong>Helm</strong></span> tab to see the list of Helm releases.
							</li><li class="listitem">
								Click the overflow menu on the Helm release that you want to use and select <span class="strong strong"><strong>Upgrade</strong></span>.
							</li><li class="listitem">
								Use the <span class="strong strong"><strong>YAML view</strong></span> to edit the Helm configuration.
							</li><li class="listitem"><p class="simpara">
								Set the value of the <code class="literal">upstream.backstage.extraAppConfig.configMapRef</code> and <code class="literal">upstream.backstage.extraAppConfig.filename</code> parameters as follows:
							</p><div class="formalpara"><p class="title"><strong>Helm configuration excerpt</strong></p><p>
									
<pre class="programlisting language-yaml">upstream:
  backstage:
    extraAppConfig:
      - configMapRef: app-config
        filename: app-config.yaml</pre>
								</p></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Upgrade</strong></span>.
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Install Developer Hub by using Helm.
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm45837625666576"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>