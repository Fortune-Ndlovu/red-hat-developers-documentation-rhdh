<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Authorization</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="As a Red Hat Developer Hub platform engineer, you can manage authorizations of other users by using role based access control (RBAC) to meet the specific needs of your organization."/><link rel="next" href="#idm45406614252224" title="Preface"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm45406632663296"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.3</span></div><div><h1 class="title">Authorization</h1></div><div><h2 class="subtitle">Configuring authorization by using role based access control (RBAC) in Red Hat Developer Hub</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm45406615466032">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As a Red Hat Developer Hub platform engineer, you can manage authorizations of other users by using role based access control (RBAC) to meet the specific needs of your organization.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#idm45406614252224">Preface</a></span></li><li><span class="chapter"><a href="#enabling-and-giving-access-to-rbac">1. Enabling and giving access to the Role-Based Access Control (RBAC) feature</a></span></li><li><span class="chapter"><a href="#proc-rbac-ui-manage-roles_title-authorization">2. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</a></span><ul><li><span class="section"><a href="#proc-rbac-ui-create-role_title-authorization">2.1. Creating a role in the Red Hat Developer Hub Web UI</a></span></li><li><span class="section"><a href="#proc-rbac-ui-edit-role_title-authorization">2.2. Editing a role in the Red Hat Developer Hub Web UI</a></span></li><li><span class="section"><a href="#proc-rbac-ui-delete-role_title-authorization">2.3. Deleting a role in the Red Hat Developer Hub Web UI</a></span></li></ul></li><li><span class="chapter"><a href="#ref-rbac-permission-policies_title-authorization">3. Permission policies in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#con-rbac-config-permission-policies_title-authorization">3.1. Permission policies configuration</a></span><ul><li><span class="section"><a href="#con-rbac-config-permission-policies-external-file_title-authorization">3.1.1. Configuration of permission policies defined in an external file</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#con-rbac-conditional-policies-rhdh_title-authorization">4. Conditional policies in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#ref-rbac-conditional-policy-definition_title-authorization">4.1. Conditional policies definition</a></span><ul><li><span class="section"><a href="#examples-of-conditional-policies">4.1.1. Examples of conditional policies</a></span></li></ul></li><li><span class="section"><a href="#proc-rbac-config-conditional-policy-file_title-authorization">4.2. Configuring conditional policies defined in an external file</a></span></li></ul></li><li><span class="chapter"><a href="#con-user-stats-rhdh_title-authorization">5. User statistics in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#proc-download-user-stats-rhdh_title-authorization">5.1. Downloading active users list in Red Hat Developer Hub</a></span></li></ul></li><li><span class="chapter"><a href="#con-rbac-rest-api_title-authorization">6. Role-based Access Control (RBAC) REST API</a></span><ul><li><span class="section"><a href="#proc-rbac-send-request-rbac-rest-api_title-authorization">6.1. Sending requests with the RBAC REST API using a REST client or curl utility</a></span></li><li><span class="section"><a href="#ref-rbac-rest-api-endpoints_title-authorization">6.2. Supported RBAC REST API endpoints</a></span><ul><li><span class="section"><a href="#roles">6.2.1. Roles</a></span></li><li><span class="section"><a href="#permission-policies">6.2.2. Permission policies</a></span></li><li><span class="section"><a href="#conditional-policies">6.2.3. Conditional policies</a></span></li><li><span class="section"><a href="#user-statistics">6.2.4. User statistics</a></span></li></ul></li></ul></li></ul></div><section class="preface" id="idm45406614252224"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>
			In <a class="link" href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/authorization/index">Authentication</a>, you learnt how to authenticate users to Red Hat Developer Hub. Developer Hub knowns who the users are.
		</p><p>
			In this book, learn how to authorize users to perform actions in Developer Hub. Define what users can do in Developer Hub.
		</p><p>
			Role-Based Access Control (RBAC) is a security concept that controls access to resources in a system, and specifies a mapping between users of the system, and the actions they can perform on resources in the system. You define roles with specific permissions, and then assign the roles to users and groups.
		</p><p>
			RBAC on Developer Hub is built on top of the Permissions framework, which defines RBAC policies in code. Rather than defining policies in code, the Developer Hub RBAC feature allows you to define policies in a declarative fashion using a simple CSV based format. You can define the policies by using Developer Hub web interface or REST API, rather than editing the CSV directly.
		</p><p>
			To apply RBAC in Developer Hub:
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					The Developer Hub administrator sets up the RBAC feature:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
							Enable the RBAC feature
						</li><li class="listitem">
							Configure Policy Administrators
						</li></ol></div></li><li class="listitem"><p class="simpara">
					The Developer Hub policy administrator configures your RBAC policies:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
							Define roles with specific permissions
						</li><li class="listitem">
							Assign the roles to users and groups
						</li></ol></div></li></ol></div></section><section class="chapter" id="enabling-and-giving-access-to-rbac"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Enabling and giving access to the Role-Based Access Control (RBAC) feature</h1></div></div></div><p>
			The Role-Based Access Control (RBAC) feature is disabled by default. Enable the RBAC plugin and declare policy administrators to start using RBAC features.
		</p><p>
			The permission policies for users and groups in the Developer Hub are managed by permission policy administrators. Only permission policy administrators can access the Role-Based Access Control REST API.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#assembly-add-custom-app-file-openshift_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.
				</li><li class="listitem">
					You have <a class="link" href="Authentication">enabled an authentication provider</a>.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					The RBAC plugin is installed but disabled by default. To enable the <code class="literal">./dynamic-plugins/dist/janus-idp-backstage-plugin-rbac</code> plugin, edit your <code class="literal">dynamic-plugins.yaml</code> with the following content.
				</p><div class="formalpara"><p class="title"><strong><code class="literal">dynamic-plugins.yaml</code> fragment</strong></p><p>
						
<pre class="programlisting language-yaml">plugins:
  - package: ./dynamic-plugins/dist/janus-idp-backstage-plugin-rbac
    disabled: false</pre>
					</p></div><p class="simpara">
					See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/installing_and_viewing_dynamic_plugins/index">Installing and viewing dynamic plugins</a>.
				</p></li><li class="listitem"><p class="simpara">
					Declare policy administrators to enable a select number of authenticated users to configure RBAC policies through the REST API or Web UI, instead of modifying the CSV file directly. The permissions can be specified in a separate CSV file referenced in the <code class="literal">app-config-rhdh</code> ConfigMap, or permissions can be created using the REST API or Web UI.
				</p><p class="simpara">
					To declare users such as <span class="emphasis"><em>&lt;your_policy_administrator_name&gt;</em></span> as policy administrators, edit your custom Developer Hub ConfigMap, such as <code class="literal">app-config-rhdh</code>, and add following code to the <code class="literal">app-config-rhdh.yaml</code> content:
				</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code> fragment</strong></p><p>
						
<pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    admin:
      users:
        - name: user:default/<span class="emphasis"><em>&lt;your_policy_administrator_name&gt;</em></span></pre>
					</p></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Sign out from the existing Red Hat Developer Hub session and log in again using the declared policy administrator account.
				</li><li class="listitem"><p class="simpara">
					With RBAC enabled, most features are disabled by default.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Catalog</strong></span> page in RHDH. The <span class="strong strong"><strong>Create</strong></span> button is not visible. You cannot create new components.
						</li><li class="listitem">
							Navigate to the API page. The <span class="strong strong"><strong>Register</strong></span> button is not visible.
						</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Explicitly enable permissions to resources in Developer Hub.
				</li></ul></div></section><section class="chapter" id="proc-rbac-ui-manage-roles_title-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</h1></div></div></div><p>
			Policy administrators can use the Developer Hub web interface (Web UI) to allocate specific roles and permissions to individual users or groups. Allocating roles ensures that access to resources and functionalities is regulated across the Developer Hub.
		</p><p>
			With the policy administrator role in Developer Hub, you can assign permissions to users and groups. This role allows you to view, create, modify, and delete the roles using Developer Hub Web UI.
		</p><section class="section" id="proc-rbac-ui-create-role_title-authorization"><div class="titlepage"><div><div><h2 class="title">2.1. Creating a role in the Red Hat Developer Hub Web UI</h2></div></div></div><p>
				You can create a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac" title="Chapter 1. Enabling and giving access to the Role-Based Access Control (RBAC) feature">have enabled RBAC and have a policy administrator role in Developer Hub</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>CREATE</strong></span> to create a role.
					</li><li class="listitem">
						Enter the name and description of the role in the given fields and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Add users and groups using the search field, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Plugin</strong></span> and <span class="strong strong"><strong>Permission</strong></span> from the drop-downs in the <span class="strong strong"><strong>Add permission policies</strong></span> section.
					</li><li class="listitem">
						Select or clear the <span class="strong strong"><strong>Policy</strong></span> that you want to set in the <span class="strong strong"><strong>Add permission policies</strong></span> section, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Review the added information in the <span class="strong strong"><strong>Review and create</strong></span> section.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>CREATE</strong></span>.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					The created role appears in the list available in the <span class="strong strong"><strong>RBAC</strong></span> tab.
				</p></div></section><section class="section" id="proc-rbac-ui-edit-role_title-authorization"><div class="titlepage"><div><div><h2 class="title">2.2. Editing a role in the Red Hat Developer Hub Web UI</h2></div></div></div><p>
				You can edit a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The policies generated from a <code class="literal">policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac" title="Chapter 1. Enabling and giving access to the Role-Based Access Control (RBAC) feature">have enabled RBAC and have a policy administrator role in Developer Hub</a>.
					</li><li class="listitem">
						The role that you want to edit is created in the Developer Hub.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem">
						Select the edit icon for the role that you want to edit.
					</li><li class="listitem">
						Edit the details of the role, such as name, description, users and groups, and permission policies, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Review the edited details of the role and click <span class="strong strong"><strong>SAVE</strong></span>.
					</li></ol></div><p>
				After editing a role, you can view the edited details of a role on the <span class="strong strong"><strong>OVERVIEW</strong></span> page of a role. You can also edit a role’s users and groups or permissions by using the edit icon on the respective cards on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
			</p></section><section class="section" id="proc-rbac-ui-delete-role_title-authorization"><div class="titlepage"><div><div><h2 class="title">2.3. Deleting a role in the Red Hat Developer Hub Web UI</h2></div></div></div><p>
				You can delete a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The policies generated from a <code class="literal">policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac" title="Chapter 1. Enabling and giving access to the Role-Based Access Control (RBAC) feature">have enabled RBAC and have a policy administrator role in Developer Hub</a>.
					</li><li class="listitem">
						The role that you want to delete is created in the Developer Hub.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem"><p class="simpara">
						Select the delete icon from the <span class="strong strong"><strong>Actions</strong></span> column for the role that you want to delete.
					</p><p class="simpara">
						<span class="strong strong"><strong>Delete this role?</strong></span> pop-up appears on the screen.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>DELETE</strong></span>.
					</li></ol></div></section></section><section class="chapter" id="ref-rbac-permission-policies_title-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Permission policies in Red Hat Developer Hub</h1></div></div></div><p>
			Permission policies in Red Hat Developer Hub are a set of rules to govern access to resources or functionalities. These policies state the authorization level that is granted to users based on their roles. The permission policies are implemented to maintain security and confidentiality within a given environment.
		</p><p>
			You can define the following types of permissions in Developer Hub:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					resource type
				</li><li class="listitem">
					basic
				</li></ul></div><p>
			The distinction between the two permission types depend on whether a permission includes a defined resource type.
		</p><p>
			You can define the resource type permission using either the associated resource type or the permission name as shown in the following example:
		</p><div class="formalpara"><p class="title"><strong>Example resource type permission definition</strong></p><p>
				
<pre class="programlisting language-csv">p, role:default/myrole, catalog.entity.read, read, allow
g, user:default/myuser, role:default/myrole

p, role:default/another-role, catalog-entity, read, allow
g, user:default/another-user, role:default/another-role</pre>
			</p></div><p>
			You can define the basic permission in Developer Hub using the permission name as shown in the following example:
		</p><div class="formalpara"><p class="title"><strong>Example basic permission definition</strong></p><p>
				
<pre class="programlisting language-csv">p, role:default/myrole, catalog.entity.create, create, allow
g, user:default/myuser, role:default/myrole</pre>
			</p></div><p>
			The following permission policies are supported in the Developer Hub:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Catalog permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406617899280" scope="col">Name</th><th align="left" valign="top" id="idm45406617898192" scope="col">Resource type</th><th align="left" valign="top" id="idm45406617897104" scope="col">Policy</th><th align="left" valign="top" id="idm45406617896016" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.entity.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192">
						<p>
							<code class="literal">catalog-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to read from the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.entity.create</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192"> </td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							create
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to create catalog entities, including registering an existing component in the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.entity.refresh</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192">
						<p>
							<code class="literal">catalog-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							update
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to refresh a single or multiple entities from the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.entity.delete</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192">
						<p>
							<code class="literal">catalog-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							delete
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to delete a single or multiple entities from the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.location.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192"> </td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to read a single or multiple locations from the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.location.create</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192"> </td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							create
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to create locations within the catalog
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617899280">
						<p>
							<code class="literal">catalog.location.delete</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617898192"> </td><td align="left" valign="top" headers="idm45406617897104">
						<p>
							delete
						</p>
						</td><td align="left" valign="top" headers="idm45406617896016">
						<p>
							Allows user or role to delete locations from the catalog
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Bulk import permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406614303088" scope="col">Name</th><th align="left" valign="top" id="idm45406614302000" scope="col">Resource type</th><th align="left" valign="top" id="idm45406614300912" scope="col">Policy</th><th align="left" valign="top" id="idm45406614299824" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406614303088">
						<p>
							<code class="literal">bulk.import</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406614302000">
						<p>
							<code class="literal">bulk-import</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406614300912"> </td><td align="left" valign="top" headers="idm45406614299824">
						<p>
							Allows the user to access the bulk import endpoints, such as listing all repositories and organizations accessible by all GitHub integrations and managing the import requests.
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Scaffolder permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406618052928" scope="col">Name</th><th align="left" valign="top" id="idm45406618051840" scope="col">Resource type</th><th align="left" valign="top" id="idm45406618050752" scope="col">Policy</th><th align="left" valign="top" id="idm45406618049664" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.action.execute</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840">
						<p>
							<code class="literal">scaffolder-action</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618050752"> </td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows the execution of an action from a template
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.template.parameter.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840">
						<p>
							<code class="literal">scaffolder-template</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618050752">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows user or role to read a single or multiple one parameters from a template
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.template.step.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840">
						<p>
							<code class="literal">scaffolder-template</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618050752">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows user or role to read a single or multiple steps from a template
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.task.create</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840"> </td><td align="left" valign="top" headers="idm45406618050752">
						<p>
							create
						</p>
						</td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows the user or role to trigger software templates which create new scaffolder tasks
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.task.cancel</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840"> </td><td align="left" valign="top" headers="idm45406618050752"> </td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows the user or role to cancel currently running scaffolder tasks
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406618052928">
						<p>
							<code class="literal">scaffolder.task.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618051840"> </td><td align="left" valign="top" headers="idm45406618050752">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406618049664">
						<p>
							Allows user or role to read all scaffolder tasks and their associated events and logs
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">RBAC permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406617506080" scope="col">Name</th><th align="left" valign="top" id="idm45406617504992" scope="col">Resource type</th><th align="left" valign="top" id="idm45406617503904" scope="col">Policy</th><th align="left" valign="top" id="idm45406617502816" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406617506080">
						<p>
							<code class="literal">policy.entity.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617504992">
						<p>
							<code class="literal">policy-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617503904">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406617502816">
						<p>
							Allows user or role to read permission policies and roles
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617506080">
						<p>
							<code class="literal">policy.entity.create</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617504992">
						<p>
							<code class="literal">policy-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617503904">
						<p>
							create
						</p>
						</td><td align="left" valign="top" headers="idm45406617502816">
						<p>
							Allows user or role to create a single or multiple permission policies and roles
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617506080">
						<p>
							<code class="literal">policy.entity.update</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617504992">
						<p>
							<code class="literal">policy-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617503904">
						<p>
							update
						</p>
						</td><td align="left" valign="top" headers="idm45406617502816">
						<p>
							Allows user or role to update a single or multiple permission policies and roles
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406617506080">
						<p>
							<code class="literal">policy.entity.delete</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617504992">
						<p>
							<code class="literal">policy-entity</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406617503904">
						<p>
							delete
						</p>
						</td><td align="left" valign="top" headers="idm45406617502816">
						<p>
							Allows user or role to delete a single or multiple permission policies and roles
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Kubernetes permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406614733472" scope="col">Name</th><th align="left" valign="top" id="idm45406614732384" scope="col">Resource type</th><th align="left" valign="top" id="idm45406614731296" scope="col">Policy</th><th align="left" valign="top" id="idm45406614730208" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406614733472">
						<p>
							<code class="literal">kubernetes.proxy</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406614732384"> </td><td align="left" valign="top" headers="idm45406614731296"> </td><td align="left" valign="top" headers="idm45406614730208">
						<p>
							Allows user or role to access the proxy endpoint
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">OCM permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406613821648" scope="col">Name</th><th align="left" valign="top" id="idm45406618000128" scope="col">Resource type</th><th align="left" valign="top" id="idm45406617999040" scope="col">Policy</th><th align="left" valign="top" id="idm45406617997952" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406613821648">
						<p>
							<code class="literal">ocm.entity.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618000128"> </td><td align="left" valign="top" headers="idm45406617999040">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406617997952">
						<p>
							Allows user or role to read from the OCM plugin
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406613821648">
						<p>
							<code class="literal">ocm.cluster.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406618000128"> </td><td align="left" valign="top" headers="idm45406617999040">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406617997952">
						<p>
							Allows user or role to read the cluster information in the OCM plugin
						</p>
						</td></tr></tbody></table></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Topology permissions</span></dt><dd/></dl></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 45%; " class="col_4"/></colgroup><thead><tr><th align="left" valign="top" id="idm45406612997824" scope="col">Name</th><th align="left" valign="top" id="idm45406614373488" scope="col">Resource type</th><th align="left" valign="top" id="idm45406614372400" scope="col">Policy</th><th align="left" valign="top" id="idm45406614371312" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45406612997824">
						<p>
							<code class="literal">topology.view.read</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406614373488"> </td><td align="left" valign="top" headers="idm45406614372400">
						<p>
							read
						</p>
						</td><td align="left" valign="top" headers="idm45406614371312">
						<p>
							Allows user or role to view the topology plugin
						</p>
						</td></tr><tr><td align="left" valign="top" headers="idm45406612997824">
						<p>
							<code class="literal">kubernetes.proxy</code>
						</p>
						</td><td align="left" valign="top" headers="idm45406614373488"> </td><td align="left" valign="top" headers="idm45406614372400"> </td><td align="left" valign="top" headers="idm45406614371312">
						<p>
							Allows user or role to access the proxy endpoint, allowing them to read pod logs and events within RHDH
						</p>
						</td></tr></tbody></table></div><section class="section" id="con-rbac-config-permission-policies_title-authorization"><div class="titlepage"><div><div><h2 class="title">3.1. Permission policies configuration</h2></div></div></div><p>
				There are two approaches to configure the permission policies in Red Hat Developer Hub, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Configuration of permission policies administrators
					</li><li class="listitem">
						Configuration of permission policies defined in an external file
					</li></ul></div><section class="section" id="con-rbac-config-permission-policies-external-file_title-authorization"><div class="titlepage"><div><div><h3 class="title">3.1.1. Configuration of permission policies defined in an external file</h3></div></div></div><p>
					You can configure the permission policies before starting the Red Hat Developer Hub. If permission policies are defined in an external file, then you can import the same file in the Developer Hub. You must define the permission policies using the following Casbin rules format:
				</p><pre class="programlisting language-format">---
`p, &lt;ROLE&gt;, &lt;PERMISSION_NAME or PERMISSION_RESOURCE_TYPE&gt;, &lt;PERMISSION_POLICY_ACTION&gt;, &lt;ALLOW or DENY&gt;`
---</pre><p>
					You can define roles using the following Casbin rules format:
				</p><pre class="programlisting language-format">---
`g, &lt;USER or GROUP&gt;, &lt;ROLE&gt;`
---</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For information about the Casbin rules format, see <a class="link" href="https://casbin.org/docs/category/the-basics">Basics of Casbin rules</a>.
					</p></div></div><p>
					The following is an example of permission policies configuration:
				</p><pre class="programlisting language-csv">---
`p, role:default/guests, catalog-entity, read, allow`</pre><p>
					<code class="literal">p, role:default/guests, catalog.entity.create, create, allow</code>
				</p><p>
					<code class="literal">g, user:default/&lt;USER_TO_ROLE&gt;, role:default/guests</code>
				</p><p>
					<code class="literal">g, group:default/&lt;GROUP_TO_ROLE&gt;, role:default/guests</code> ---
				</p><p>
					If a defined permission does not contain an action associated with it, then add <code class="literal">use</code> as a policy. See the following example:
				</p><pre class="programlisting language-csv">---
`p, role:default/guests, kubernetes.proxy, use, allow`
---</pre><p>
					You can define the <code class="literal">policy.csv</code> file path in the <code class="literal">app-config.yaml</code> file:
				</p><pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    policies-csv-file: /some/path/rbac-policy.csv</pre><p>
					You can use an optional configuration value that enables reloading the CSV file without restarting the Developer Hub instance.
				</p><p>
					Set the value of the <code class="literal">policyFileReload</code> option in the <code class="literal">app-config.yaml</code> file:
				</p><pre class="programlisting language-yaml"># ...
permission:
  enabled: true
  rbac:
    policies-csv-file: /some/path/rbac-policy.csv
    policyFileReload: true
    # ...</pre><section class="section" id="proc-mounting-the-policy-csv-file-using-the-operator_title-authorization"><div class="titlepage"><div><div><h4 class="title">3.1.1.1. Mounting <code class="literal">policy.csv</code> file using the Developer Hub Operator</h4></div></div></div><p>
						When the Red Hat Developer Hub is deployed with the Operator, you can add your <code class="literal">policy.csv</code> file using the Developer Hub Operator by creating a <code class="literal">ConfigMap</code> and mounting it through your Custom Resource (CR).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You are logged in to your OpenShift Container Platform account using the OpenShift Container Platform web console.
							</li><li class="listitem">
								Red Hat Developer Hub is installed and deployed using the Operator.
							</li><li class="listitem">
								You have added a custom configuration file to OpenShift Container Platform. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index">Adding a custom configuration file to OpenShift Container Platform</a>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In OpenShift Container Platform, create a ConfigMap to hold the policies as shown in the following example:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ConfigMap</code></strong></p><p>
									
<pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: rbac-policy
data:
  rbac-policy.csv: |
    p, role:default/guests, catalog-entity, read, allow
    p, role:default/guests, catalog.entity.create, create, allow

    g, user:default/&lt;YOUR_USER&gt;, role:default/guests</pre>
								</p></div></li><li class="listitem"><p class="simpara">
								Update the policy path in your custom <code class="literal">app-config.yaml</code> ConfigMap as follows:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">app-config.yaml</code> file</strong></p><p>
									
<pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    policies-csv-file: ./rbac-policy.csv</pre>
								</p></div></li><li class="listitem">
								From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Topology</strong></span> view.
							</li><li class="listitem">
								Click the overflow menu for the Red Hat Developer Hub instance that you want to use and select <span class="strong strong"><strong>Edit Backstage</strong></span> to load the YAML view of the Red Hat Developer Hub instance.
							</li><li class="listitem"><p class="simpara">
								In the CR, enter the name of the custom <code class="literal">rbac-policy</code> ConfigMap as the value for the <code class="literal">spec.application.extraFiles.configMaps</code> field. For example:
							</p><div class="formalpara"><p class="title"><strong>Example custom resource</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha1
kind: Backstage
metadata:
  name: example
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
        - name: app-config-rhdh
    extraEnvs:
      secrets:
        - name: secrets-rhdh
    extraFiles:
      mountPath: /opt/app-root/src
      configMaps:
        - name: rbac-policy
    replicas: 1
    route:
      enabled: true
  database:
    enableLocalDb: true</pre>
								</p></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Navigate back to the <span class="strong strong"><strong>Topology</strong></span> view and wait for the Red Hat Developer Hub pod to start.
							</li><li class="listitem">
								Click the <span class="strong strong"><strong>Open URL</strong></span> icon to access the Red Hat Developer Hub platform with the updated configuration settings.
							</li></ol></div></section><section class="section" id="proc-mounting-the-policy-csv-file-using-helm_title-authorization"><div class="titlepage"><div><div><h4 class="title">3.1.1.2. Mounting <code class="literal">policy.csv</code> file to the Developer Hub Helm chart</h4></div></div></div><p>
						When the Red Hat Developer Hub is deployed with the Helm chart, you must define the <code class="literal">policy.csv</code> file by mounting it to the Developer Hub Helm chart.
					</p><p>
						You can add your <code class="literal">policy.csv</code> file to the Developer Hub Helm Chart by creating a <code class="literal">configMap</code> and mounting it.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You are logged in to your OpenShift Container Platform account using the OpenShift Container Platform web console.
							</li><li class="listitem">
								Red Hat Developer Hub is installed and deployed using Helm Chart.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								In OpenShift Container Platform, create a ConfigMap to hold the policies as shown in the following example:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">ConfigMap</code></strong></p><p>
									
<pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: rbac-policy
  namespace: rhdh
data:
  rbac-policy.csv: |
    p, role:default/guests, catalog-entity, read, allow
    p, role:default/guests, catalog.entity.create, create, allow

    g, user:default/&lt;YOUR_USER&gt;, role:default/guests</pre>
								</p></div></li><li class="listitem">
								In the Developer Hub Helm Chart, go to <span class="strong strong"><strong>Root Schema → Backstage chart schema → Backstage parameters → Backstage container additional volume mounts</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Select <span class="strong strong"><strong>Add Backstage container additional volume mounts</strong></span> and add the following values:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>mountPath</strong></span>: <code class="literal">opt/app-root/src/rbac</code>
									</li><li class="listitem">
										<span class="strong strong"><strong>Name</strong></span>: <code class="literal">rbac-policy</code>
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Add the RBAC policy to the <span class="strong strong"><strong>Backstage container additional volumes</strong></span> in the Developer Hub Helm Chart:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>name</strong></span>: <code class="literal">rbac-policy</code>
									</li><li class="listitem"><p class="simpara">
										<span class="strong strong"><strong>configMap</strong></span>
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												<span class="strong strong"><strong>defaultMode</strong></span>: <code class="literal">420</code>
											</li><li class="listitem">
												<span class="strong strong"><strong>name</strong></span>: <code class="literal">rbac-policy</code>
											</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Update the policy path in the <code class="literal">app-config.yaml</code> file as follows:
							</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">app-config.yaml</code> file</strong></p><p>
									
<pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    policies-csv-file: ./rbac/rbac-policy.csv</pre>
								</p></div></li></ol></div></section></section></section></section><section class="chapter" id="con-rbac-conditional-policies-rhdh_title-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Conditional policies in Red Hat Developer Hub</h1></div></div></div><p>
			The permission framework in Red Hat Developer Hub provides conditions, supported by the RBAC backend plugin (<code class="literal">backstage-plugin-rbac-backend</code>). The conditions work as content filters for the Developer Hub resources that are provided by the RBAC backend plugin.
		</p><p>
			The RBAC backend API stores conditions assigned to roles in the database. When you request to access the frontend resources, the RBAC backend API searches for the corresponding conditions and delegates them to the appropriate plugin using its plugin ID. If you are assigned to multiple roles with different conditions, then the RBAC backend merges the conditions using the <code class="literal">anyOf</code> criteria.
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Conditional criteria</span></dt><dd><p class="simpara">
						A condition in Developer Hub is a simple condition with a rule and parameters. However, a condition can also contain a parameter or an array of parameters combined by conditional criteria. The supported conditional criteria includes:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">allOf</code>: Ensures that all conditions within the array must be true for the combined condition to be satisfied.
							</li><li class="listitem">
								<code class="literal">anyOf</code>: Ensures that at least one of the conditions within the array must be true for the combined condition to be satisfied.
							</li><li class="listitem">
								<code class="literal">not</code>: Ensures that the condition within it must not be true for the combined condition to be satisfied.
							</li></ul></div></dd><dt><span class="term">Conditional object</span></dt><dd><p class="simpara">
						The plugin specifies the parameters supported for conditions. You can access the conditional object schema from the RBAC API endpoint to understand how to construct a conditional JSON object, which is then used by the RBAC backend plugin API.
					</p><p class="simpara">
						A conditional object contains the following parameters:
					</p><div class="table" id="idm45406616014960"><p class="title"><strong>Table 4.1. Conditional object parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 25%; " class="col_3"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406617530832" scope="col">Parameter</th><th style="text-align: left; vertical-align: top; " id="idm45406617529744" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406617528656" scope="col">Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">result</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										String
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										Always has the value <code class="literal">CONDITIONAL</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">roleEntityRef</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										String
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										String entity reference to the RBAC role, such as <code class="literal">role:default/dev</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">pluginId</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										String
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										Corresponding plugin ID, such as <code class="literal">catalog</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">permissionMapping</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										String array
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										Array permission actions, such as <code class="literal">['read', 'update', 'delete']</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">resourceType</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										String
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										Resource type provided by the plugin, such as <code class="literal">catalog-entity</code>
									</p>
									</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617530832">
									<p>
										<code class="literal">conditions</code>
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617529744">
									<p>
										JSON
									</p>
									</td><td style="text-align: left; vertical-align: top; " headers="idm45406617528656">
									<p>
										Condition JSON with parameters or array parameters joined by criteria
									</p>
									</td></tr></tbody></table></div></div></dd><dt><span class="term">Conditional policy aliases</span></dt><dd><p class="simpara">
						The RBAC backend plugin (<code class="literal">backstage-plugin-rbac-backend</code>) supports the use of aliases in conditional policy rule parameters. The conditional policy aliases are dynamically replaced with the corresponding values during policy evaluation. Each alias in conditional policy is prefixed with a <code class="literal">$</code> sign indicating its special function.
					</p><p class="simpara">
						The supported conditional aliases include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">$currentUser</code>: This alias is replaced with the user entity reference for the user who requests access to the resource. For example, if user Tom from the default namespace requests access, <code class="literal">$currentUser</code> becomes <code class="literal">user:default/tom</code>.
							</li></ul></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Example conditional policy object with <code class="literal">$currentUser</code> alias</strong></p><p>
				
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["delete"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["$currentUser"]
    }
  }
}</pre>
			</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal">$ownerRefs</code>: This alias is replaced with ownership references, usually as an array that includes the user entity reference and the user’s parent group entity reference. For example, for user Tom from team-a, <code class="literal">$ownerRefs</code> becomes <code class="literal">['user:default/tom', 'group:default/team-a']</code>.
				</li></ul></div><div class="formalpara"><p class="title"><strong>Example conditional policy object with <code class="literal">$ownerRefs</code> alias</strong></p><p>
				
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["delete"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["$ownerRefs"]
    }
  }
}</pre>
			</p></div><section class="section" id="ref-rbac-conditional-policy-definition_title-authorization"><div class="titlepage"><div><div><h2 class="title">4.1. Conditional policies definition</h2></div></div></div><p>
				You can access API endpoints for conditional policies in Red Hat Developer Hub. For example, to retrieve the available conditional rules, which can help you define these policies, you can access the <code class="literal">GET [api/plugins/condition-rules]</code> endpoint.
			</p><p>
				The <code class="literal">api/plugins/condition-rules</code> returns the condition parameters schemas, for example:
			</p><pre class="programlisting language-json">[
   {
      "pluginId": "catalog",
      "rules": [
         {
            "name": "HAS_ANNOTATION",
            "description": "Allow entities with the specified annotation",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "annotation": {
                     "type": "string",
                     "description": "Name of the annotation to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the annotation to match on"
                  }
               },
               "required": [
                  "annotation"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_LABEL",
            "description": "Allow entities with the specified label",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "label": {
                     "type": "string",
                     "description": "Name of the label to match on"
                  }
               },
               "required": [
                  "label"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_METADATA",
            "description": "Allow entities with the specified metadata subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities metadata to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_SPEC",
            "description": "Allow entities with the specified spec subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities spec to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_KIND",
            "description": "Allow entities matching a specified kind",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "kinds": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of kinds to match at least one of"
                  }
               },
               "required": [
                  "kinds"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_OWNER",
            "description": "Allow entities owned by a specified claim",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "claims": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of claims to match at least one on within ownedBy"
                  }
               },
               "required": [
                  "claims"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         }
      ]
   }
   ... &lt;another plugin condition parameter schemas&gt;
]</pre><p>
				The RBAC backend API constructs a condition JSON object based on the previous condition schema.
			</p><section class="section" id="examples-of-conditional-policies"><div class="titlepage"><div><div><h3 class="title">4.1.1. Examples of conditional policies</h3></div></div></div><p>
					In Red Hat Developer Hub, you can define conditional policies with or without criteria. You can use the following examples to define the conditions based on your use case:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">A condition without criteria</span></dt><dd><p class="simpara">
								Consider a condition without criteria displaying catalogs only if user is a member of the owner group. To add this condition, you can use the catalog plugin schema <code class="literal">IS_ENTITY_OWNER</code> as follows:
							</p><div class="formalpara"><p class="title"><strong>Example condition without criteria</strong></p><p>
									
<pre class="programlisting language-json">{
  "rule": "IS_ENTITY_OWNER",
  "resourceType": "catalog-entity",
  "params": {
    "claims": ["group:default/team-a"]
  }
}</pre>
								</p></div><p class="simpara">
								In the previous example, the only conditional parameter used is <code class="literal">claims</code>, which contains a list of user or group entity references.
							</p><p class="simpara">
								You can apply the previous example condition to the RBAC REST API by adding additional parameters as follows:
							</p><pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["group:default/team-a"]
    }
  }
}</pre></dd><dt><span class="term">A condition with criteria</span></dt><dd><p class="simpara">
								Consider a condition with criteria, which displays catalogs only if user is a member of owner group OR displays list of all catalog user groups.
							</p><p class="simpara">
								To add the criteria, you can add another rule as <code class="literal">IS_ENTITY_KIND</code> in the condition as follows:
							</p><div class="formalpara"><p class="title"><strong>Example condition with criteria</strong></p><p>
									
<pre class="programlisting language-json">{
  "anyOf": [
    {
      "rule": "IS_ENTITY_OWNER",
      "resourceType": "catalog-entity",
      "params": {
        "claims": ["group:default/team-a"]
      }
    },
    {
      "rule": "IS_ENTITY_KIND",
      "resourceType": "catalog-entity",
      "params": {
        "kinds": ["Group"]
      }
    }
  ]
}</pre>
								</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Running conditions in parallel during creation is not supported. Therefore, consider defining nested conditional policies based on the available criteria.
								</p></div></div><div class="formalpara"><p class="title"><strong>Example of nested conditions</strong></p><p>
									
<pre class="programlisting language-json">{
  "anyOf": [
    {
      "rule": "IS_ENTITY_OWNER",
      "resourceType": "catalog-entity",
      "params": {
        "claims": ["group:default/team-a"]
      }
    },
    {
      "rule": "IS_ENTITY_KIND",
      "resourceType": "catalog-entity",
      "params": {
        "kinds": ["Group"]
      }
    }
  ],
  "not": {
    "rule": "IS_ENTITY_KIND",
    "resourceType": "catalog-entity",
    "params": { "kinds": ["Api"] }
  }
}</pre>
								</p></div><p class="simpara">
								You can apply the previous example condition to the RBAC REST API by adding additional parameters as follows:
							</p><pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</pre></dd></dl></div><p>
					The following examples can be used with Developer Hub plugins. These examples can help you determine how to define conditional policies:
				</p><div class="formalpara"><p class="title"><strong>Conditional policy defined for Keycloak plugin</strong></p><p>
						
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["update", "delete"],
  "conditions": {
    "not": {
      "rule": "HAS_ANNOTATION",
      "resourceType": "catalog-entity",
      "params": { "annotation": "keycloak.org/realm", "value": "&lt;YOUR_REALM&gt;" }
    }
  }
}</pre>
					</p></div><p>
					The previous example of Keycloak plugin prevents users in the <code class="literal">role:default/developer</code> from updating or deleting users that are ingested into the catalog from the Keycloak plugin.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In the previous example, the annotation <code class="literal">keycloak.org/realm</code> requires the value of <code class="literal">&lt;YOUR_REALM&gt;</code>.
					</p></div></div><div class="formalpara"><p class="title"><strong>Conditional policy defined for Quay plugin</strong></p><p>
						
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "scaffolder",
  "resourceType": "scaffolder-action",
  "permissionMapping": ["use"],
  "conditions": {
    "not": {
      "rule": "HAS_ACTION_ID",
      "resourceType": "scaffolder-action",
      "params": { "actionId": "quay:create-repository" }
    }
  }
}</pre>
					</p></div><p>
					The previous example of Quay plugin prevents the role <code class="literal">role:default/developer</code> from using the Quay scaffolder action. Note that <code class="literal">permissionMapping</code> contains <code class="literal">use</code>, signifying that <code class="literal">scaffolder-action</code> resource type permission does not have a permission policy.
				</p><p>
					For more information about permissions in Red Hat Developer Hub, see <a class="xref" href="#ref-rbac-permission-policies_title-authorization" title="Chapter 3. Permission policies in Red Hat Developer Hub">Chapter 3, <em>Permission policies in Red Hat Developer Hub</em></a>.
				</p></section></section><section class="section" id="proc-rbac-config-conditional-policy-file_title-authorization"><div class="titlepage"><div><div><h2 class="title">4.2. Configuring conditional policies defined in an external file</h2></div></div></div><p>
				You can configure and manage conditional policies that are defined in an external file. To define conditional policies, you can directly edit the configuration files and pass them to Developer Hub, instead of using the Developer Hub web UI or API. You can configure Developer Hub to use these files instead of the default files.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to your OpenShift Container Platform account using the OpenShift Container Platform web console.
					</li><li class="listitem"><p class="simpara">
						You have defined roles and associated policies in a CSV file that serves as a basis for creating roles and permissions. Ensure that you mount the CSV file to Developer Hub.
					</p><p class="simpara">
						For more information, see <a class="link" href="#ref-rbac-conditional-policy-definition_title-authorization" title="4.1. Conditional policies definition">Conditional policies definition</a> and <a class="link" href="#con-rbac-config-permission-policies-external-file_title-authorization" title="3.1.1. Configuration of permission policies defined in an external file">Configuration of permission policies defined in an external file</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Define conditional policies in a YAML file, which includes role references, permission mappings, and conditions.
					</p><p class="simpara">
						The following is an example of a YAML file defining conditional policies:
					</p><div class="formalpara"><p class="title"><strong>Example YAML file defining conditional policies</strong></p><p>
							
<pre class="programlisting language-yaml">---
result: CONDITIONAL
roleEntityRef: 'role:default/test'
pluginId: catalog
resourceType: catalog-entity
permissionMapping:
  - read
  - update
conditions:
  rule: IS_ENTITY_OWNER
  resourceType: catalog-entity
  params:
    claims:
      - 'group:default/team-a'
      - 'group:default/team-b'
---
result: CONDITIONAL
roleEntityRef: 'role:default/test'
pluginId: catalog
resourceType: catalog-entity
permissionMapping:
  - delete
conditions:
  rule: IS_ENTITY_OWNER
  resourceType: catalog-entity
  params:
    claims:
      - 'group:default/team-a'</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						In OpenShift Container Platform, create a ConfigMap to hold the policies as shown in the following example:
					</p><div class="formalpara"><p class="title"><strong>Example ConfigMap</strong></p><p>
							
<pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: rbac-conditional-policy
  namespace: rhdh
data:
  rbac-policy.yaml: |
    p, role:default/guests, catalog-entity, read, allow

    result: CONDITIONAL
    roleEntityRef: 'role:default/test'
    pluginId: catalog
    resourceType: catalog-entity
    permissionMapping:
      - read
      - update
    conditions:
      rule: IS_ENTITY_OWNER
      resourceType: catalog-entity
      params:
        claims:
          - 'group:default/team-a'
          - 'group:default/team-b'</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						Open <code class="literal">app-config.yaml</code> file and specify the path to <code class="literal">conditionalPoliciesFile</code> as shown in the following example:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">app-config.yaml</code> file</strong></p><p>
							
<pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    conditionalPoliciesFile: /some/path/conditional-policies.yaml</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						To enable automatic reloading of the policy file without restarting the application, add the <code class="literal">policyFileReload</code> option and set it to <code class="literal">true</code>:
					</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">app-config.yaml</code> file</strong></p><p>
							
<pre class="programlisting language-yaml">permission:
  enabled: true
  rbac:
    conditionalPoliciesFile: /some/path/conditional-policies.yaml
    policies-csv-file: /some/path/rbac-policy.csv
    policyFileReload: true</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						Optional: Define nested conditional policies in the YAML file as needed.
					</p><div class="formalpara"><p class="title"><strong>Example for nested conditional policies</strong></p><p>
							
<pre class="programlisting language-yaml">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["delete"],
  "conditions": {
  "allOf": [
    {
      "anyOf": [
        {
          "rule": "IS_ENTITY_KIND",
          "resourceType": "catalog-entity",
          "params": {
            "kinds": [
              "group"
            ]
          }
        },
        {
          "rule": "IS_ENTITY_OWNER",
          "resourceType": "catalog-entity",
          "params": {
            "claims": [
              "$ownerRefs"
            ]
          }
        }
      ]
    },
    {
      "not": {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": [
            "api"
          ]
        }
      }
    }
  ]
}
}</pre>
						</p></div><p class="simpara">
						In the previous example, the <code class="literal">role:default/developer</code> is granted the condition to delete catalog entities only if they are the entity owner or if the catalog entity belongs to a group. However, this condition does not apply if the catalog entity is an API.
					</p></li></ol></div></section></section><section class="chapter" id="con-user-stats-rhdh_title-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 5. User statistics in Red Hat Developer Hub</h1></div></div></div><p>
			In Red Hat Developer Hub, the <code class="literal">licensed-users-info-backend</code> plugin provides statistical information about the logged-in users using the Web UI or REST API endpoints.
		</p><p>
			The <code class="literal">licensed-users-info-backend</code> plugin enables administrators to monitor the number of active users on Developer Hub. Using this feature, organizations can compare their actual usage with the number of licenses they have purchased. Additionally, you can share the user metrics with Red Hat for transparency and accurate licensing.
		</p><p>
			The <code class="literal">licensed-users-info-backend</code> plugin is enabled by default. This plugin enables a <span class="strong strong"><strong>Download User List</strong></span> link at the bottom of the <span class="strong strong"><strong>Administration → RBAC</strong></span> tab.
		</p><section class="section" id="proc-download-user-stats-rhdh_title-authorization"><div class="titlepage"><div><div><h2 class="title">5.1. Downloading active users list in Red Hat Developer Hub</h2></div></div></div><p>
				You can download the list of users in CSV format using the Developer Hub web interface.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						RBAC plugins (<code class="literal">@janus-idp/backstage-plugin-rbac</code> and <code class="literal">@janus-idp/backstage-plugin-rbac-backend</code>) must be enabled in Red Hat Developer Hub.
					</li><li class="listitem">
						An administrator role must be assigned.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In Red Hat Developer Hub, navigate to <span class="strong strong"><strong>Administration</strong></span> and select the <span class="strong strong"><strong>RBAC</strong></span> tab.
					</li><li class="listitem">
						At the bottom of the <span class="strong strong"><strong>RBAC</strong></span> page, click <span class="strong strong"><strong>Download User List</strong></span>.
					</li><li class="listitem">
						Optional: Modify the file name in the <span class="strong strong"><strong>Save as</strong></span> field and click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem">
						To access the downloaded users list, go to the <span class="strong strong"><strong>Downloads</strong></span> folder on your local machine and open the CSV file.
					</li></ol></div></section></section><section class="chapter" id="con-rbac-rest-api_title-authorization"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Role-based Access Control (RBAC) REST API</h1></div></div></div><p>
			Red Hat Developer Hub provides RBAC REST API that you can use to manage the permissions and roles in the Developer Hub. This API supports you to facilitate and automate the maintenance of Developer Hub permission policies and roles.
		</p><p>
			Using the RBAC REST API, you can perform the following actions:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Retrieve information about all permission policies or specific permission policies, or roles
				</li><li class="listitem">
					Create, update, or delete a permission policy or a role
				</li><li class="listitem">
					Retrieve permission policy information about static plugins
				</li></ul></div><p>
			The RBAC REST API requires the following components:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authorization</span></dt><dd><p class="simpara">
						The RBAC REST API requires Bearer token authorization for the permitted user role. For development purposes, you can access a web console in a browser. When you refresh a token request in the list of network requests, you find the token in the response JSON.
					</p><p class="simpara">
						<code class="literal">Authorization: Bearer $token</code>
					</p><p class="simpara">
						For example, on the Developer Hub <span class="strong strong"><strong>Homepage</strong></span>, navigate to the <span class="strong strong"><strong>Network</strong></span> tab and search for the <code class="literal">query?term=</code> network call. Alternatively, you can go to the <span class="strong strong"><strong>Catalog</strong></span> page and select any Catalog API network call to acquire the Bearer token.
					</p></dd><dt><span class="term">HTTP methods</span></dt><dd><p class="simpara">
						The RBAC REST API supports the following HTTP methods for API requests:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">GET</code>: Retrieves specified information from a specified resource endpoint
							</li><li class="listitem">
								<code class="literal">POST</code>: Creates or updates a resource
							</li><li class="listitem">
								<code class="literal">PUT</code>: Updates a resource
							</li><li class="listitem">
								<code class="literal">DELETE</code>: Deletes a resource
							</li></ul></div></dd><dt><span class="term">Base URL</span></dt><dd>
						The base URL for RBAC REST API requests is <code class="literal">http://SERVER:PORT/api/permission/policies</code>, such as <code class="literal">http://localhost:7007/api/permission/policies</code>.
					</dd><dt><span class="term">Endpoints</span></dt><dd><p class="simpara">
						RBAC REST API endpoints, such as <code class="literal">/api/permission/policies/[kind]/[namespace]/[name]</code> for specified <code class="literal">kind</code>, <code class="literal">namespace</code>, and <code class="literal">name</code>, are the URI that you append to the base URL to access the corresponding resource.
					</p><p class="simpara">
						Example request URL for <code class="literal">/api/permission/policies/[kind]/[namespace]/[name]</code> endpoint is:
					</p><p class="simpara">
						<code class="literal">http://localhost:7007/api/permission/policies/user/default/johndoe</code>
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If at least one permission is assigned to <code class="literal">user:default/johndoe</code>, then the example request URL mentioned previously returns a result if sent in a <code class="literal">GET</code> response with a valid authorization token. However, if permission is only assigned to roles, then the example request URL does not return an output.
						</p></div></div></dd><dt><span class="term">Request data</span></dt><dd><p class="simpara">
						HTTP <code class="literal">POST</code> requests in the RBAC REST API may require a JSON request body with data to accompany the request.
					</p><p class="simpara">
						Example <code class="literal">POST</code> request URL and JSON request body data for <code class="literal">http://localhost:7007/api/permission/policies</code>:
					</p><pre class="programlisting language-json">{
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "delete",
    "effect": "allow"
}</pre></dd><dt><span class="term">HTTP status codes</span></dt><dd><p class="simpara">
						The RBAC REST API supports the following HTTP status codes to return as responses:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">200</code> OK: The request was successful.
							</li><li class="listitem">
								<code class="literal">201</code> Created: The request resulted in a new resource being successfully created.
							</li><li class="listitem">
								<code class="literal">204</code> No Content: The request was successful, but there is no additional content to send in the response payload.
							</li><li class="listitem">
								<code class="literal">400</code> Bad Request: input error with the request
							</li><li class="listitem">
								<code class="literal">401</code> Unauthorized: lacks valid authentication for the requested resource
							</li><li class="listitem">
								<code class="literal">403</code> Forbidden: refusal to authorize request
							</li><li class="listitem">
								<code class="literal">404</code> Not Found: could not find requested resource
							</li><li class="listitem">
								<code class="literal">409</code> Conflict: request conflict with the current state and the target resource
							</li></ul></div></dd><dt><span class="term">Source</span></dt><dd><p class="simpara">
						Each permission policy and role created using the RBAC plugin is associated with a source to maintain data consistency within the plugin. You can manipulate permission policies and roles based on the following designated source information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								CSV file
							</li><li class="listitem">
								Configuration file
							</li><li class="listitem">
								REST API
							</li><li class="listitem">
								Legacy
							</li></ul></div><p class="simpara">
						Managing roles and permission policies originating from CSV files and REST API involves straightforward modification based on their initial source information.
					</p><p class="simpara">
						The Configuration file pertains to the default <code class="literal">role:default/rbac_admin</code> role provided by the RBAC plugin. The default role has limited permissions to create, read, update, and delete permission policies or roles, and to read catalog entities.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In case the default permissions are insufficient for your administrative requirements, you can create a custom admin role with required permission policies.
						</p></div></div><p class="simpara">
						The legacy source applies to policies and roles defined before RBAC backend plugin version <code class="literal">2.1.3</code>, and is the least restrictive among the source location options. You must update the permissions and roles in legacy source to use either REST API or the CSV file sources.
					</p><p class="simpara">
						You can use the <code class="literal">GET</code> requests to query roles and policies and determine the source information, if required.
					</p></dd></dl></div><section class="section" id="proc-rbac-send-request-rbac-rest-api_title-authorization"><div class="titlepage"><div><div><h2 class="title">6.1. Sending requests with the RBAC REST API using a REST client or curl utility</h2></div></div></div><p>
				The RBAC REST API enables you to interact with the permission policies and roles in Developer Hub without using the user interface. You can send RBAC REST API requests using any REST client or curl utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Developer Hub is installed and running.
					</li></ul></div><p>
				For more information about installing Red Hat Developer Hub, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/installing_red_hat_developer_hub_on_openshift_container_platform/index#assembly-install-rhdh-ocp-helm">Installing Red Hat Developer Hub on OpenShift Container Platform with the Helm chart</a>.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the Developer Hub.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify a relevant API endpoint to which you want to send a request, such as <code class="literal">POST /api/permission/policies</code>. Adjust any request details according to your use case.
					</p><p class="simpara">
						<span class="strong strong"><strong>For REST client</strong></span>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Authorization: Enter the generated token from the web console.
							</li><li class="listitem">
								HTTP method: Set to <code class="literal">POST</code>.
							</li><li class="listitem">
								URL: Enter the RBAC REST API base URL and endpoint such as <code class="literal">http://localhost:7007/api/permission/policies</code>.
							</li></ul></div><p class="simpara">
						<span class="strong strong"><strong>For curl utility</strong></span>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">-X</code>: Set to <code class="literal">POST</code>
							</li><li class="listitem"><p class="simpara">
								<code class="literal">-H</code>: Set the following header:
							</p><p class="simpara">
								<code class="literal">Content-type: application/json</code>
							</p><p class="simpara">
								<code class="literal">Authorization: Bearer $token</code>
							</p><p class="simpara">
								<code class="literal">$token</code> is the requested token from the web console in a browser.
							</p></li><li class="listitem">
								URL: Enter the following RBAC REST API base URL endpoint, such as <code class="literal">http://localhost:7007/api/permission/policies</code>
							</li><li class="listitem">
								<code class="literal">-d</code>: Add a request JSON body
							</li></ul></div><p class="simpara">
						<span class="strong strong"><strong>Example requests</strong></span>:
					</p><p class="simpara">
						<code class="literal">curl -X POST "http://localhost:7007/api/permission/roles" -d '{"memberReferences": ["group:default/example"], "name": "role:default/test", "metadata": { "description": "This is a test role" } }' -H "Content-Type: application/json" -H "Authorization: Bearer $token" -v</code>
					</p><p class="simpara">
						<code class="literal">curl -X POST "http://localhost:7007/api/permission/policies" -d '[{"entityReference":"role:default/test", "permission": "catalog-entity", "policy": "read", "effect":"allow"}]' -H "Content-Type: application/json" -H "Authorization: Bearer $token" -v</code>
					</p><p class="simpara">
						<code class="literal">curl -X POST "http://localhost:7007/api/permission/roles/conditions" -d '{"result": "CONDITIONAL", "roleEntityRef": "role:default/test", "pluginId": "catalog", "resourceType": "catalog-entity", "permissionMapping": ["read"], "conditions": {"rule": "IS_ENTITY_OWNER", "resourceType": "catalog-entity", "params": {"claims": ["group:default/janus-authors"]}}}' -H "Content-Type: application/json" -H "Authorization: Bearer $token" -v</code>
					</p></li><li class="listitem">
						Execute the request and review the response.
					</li></ol></div></section><section class="section" id="ref-rbac-rest-api-endpoints_title-authorization"><div class="titlepage"><div><div><h2 class="title">6.2. Supported RBAC REST API endpoints</h2></div></div></div><p>
				The RBAC REST API provides endpoints for managing roles, permissions, and conditional policies in the Developer Hub and for retrieving information about the roles and policies.
			</p><section class="section" id="roles"><div class="titlepage"><div><div><h3 class="title">6.2.1. Roles</h3></div></div></div><p>
					The RBAC REST API supports the following endpoints for managing roles in the Red Hat Developer Hub.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">[GET] /api/permission/roles</span></dt><dd><p class="simpara">
								Returns all roles in Developer Hub.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "memberReferences": ["user:default/username"],
    "name": "role:default/guests"
  },
  {
    "memberReferences": [
      "group:default/groupname",
      "user:default/username"
    ],
    "name": "role:default/rbac_admin"
  }
]</pre>
								</p></div></dd><dt><span class="term">[GET] /api/permission/roles/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Returns information for a single role in Developer Hub.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "memberReferences": [
      "group:default/groupname",
      "user:default/username"
    ],
    "name": "role:default/rbac_admin"
  }
]</pre>
								</p></div></dd><dt><span class="term">[POST] /api/permission/roles/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Creates a role in Developer Hub.
							</p><div class="table" id="idm45406615729280"><p class="title"><strong>Table 6.1. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406615722592" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406615721504" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406615720416" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406615719328" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406615722592">
											<p>
												<code class="literal">body</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615721504">
											<p>
												The <code class="literal">memberReferences</code>, <code class="literal">group</code>, <code class="literal">namespace</code>, and <code class="literal">name</code> the new role to be created.
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615720416">
											<p>
												Request body
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615719328">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "memberReferences": ["group:default/test"],
  "name": "role:default/test_admin"
}</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">201 Created</pre>
								</p></div></dd><dt><span class="term">[PUT] /api/permission/roles/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Updates <code class="literal">memberReferences</code>, <code class="literal">kind</code>, <code class="literal">namespace</code>, or <code class="literal">name</code> for a role in Developer Hub.
							</p><div class="formalpara"><p class="title"><strong>Request parameters</strong></p><p>
									The request body contains the <code class="literal">oldRole</code> and <code class="literal">newRole</code> objects:
								</p></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406617380688" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406617379600" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406617378512" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406617377424" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617380688">
											<p>
												<code class="literal">body</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617379600">
											<p>
												The <code class="literal">memberReferences</code>, <code class="literal">group</code>, <code class="literal">namespace</code>, and <code class="literal">name</code> the new role to be created.
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617378512">
											<p>
												Request body
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617377424">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "oldRole": {
    "memberReferences": ["group:default/test"],
    "name": "role:default/test_admin"
  },
  "newRole": {
    "memberReferences": ["group:default/test", "user:default/test2"],
    "name": "role:default/test_admin"
  }
}</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">200 OK</pre>
								</p></div></dd><dt><span class="term">[DELETE] /api/permission/roles/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span>?memberReferences=&lt;VALUE&gt;</span></dt><dd><p class="simpara">
								Deletes the specified user or group from a role in Developer Hub.
							</p><div class="table" id="idm45406619644576"><p class="title"><strong>Table 6.2. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406619637888" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406619636800" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406619635712" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406619634624" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406619637888">
											<p>
												<code class="literal">kind</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619636800">
											<p>
												Kind of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619635712">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619634624">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406619637888">
											<p>
												<code class="literal">namespace</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619636800">
											<p>
												Namespace of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619635712">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619634624">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406619637888">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619636800">
											<p>
												Name of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619635712">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619634624">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406619637888">
											<p>
												<code class="literal">memberReferences</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619636800">
											<p>
												Associated group information
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619635712">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619634624">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">204</pre>
								</p></div></dd><dt><span class="term">[DELETE] /api/permission/roles/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Deletes a specified role from Developer Hub.
							</p><div class="table" id="idm45406613650256"><p class="title"><strong>Table 6.3. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406613643568" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406613642480" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406613641392" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406613640304" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613643568">
											<p>
												<code class="literal">kind</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613642480">
											<p>
												Kind of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613641392">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613640304">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613643568">
											<p>
												<code class="literal">namespace</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613642480">
											<p>
												Namespace of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613641392">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613640304">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613643568">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613642480">
											<p>
												Name of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613641392">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613640304">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">204</pre>
								</p></div></dd></dl></div></section><section class="section" id="permission-policies"><div class="titlepage"><div><div><h3 class="title">6.2.2. Permission policies</h3></div></div></div><p>
					The RBAC REST API supports the following endpoints for managing permission policies in the Red Hat Developer Hub.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">[GET] /api/permission/policies</span></dt><dd><p class="simpara">
								Returns permission policies list for all users.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
  {
    "entityReference": "role:default/test",
    "permission": "catalog.entity.create",
    "policy": "use",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
]</pre>
								</p></div></dd><dt><span class="term">[GET] /api/permission/policies/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Returns permission policies related to the specified entity reference.
							</p><div class="table" id="idm45406617036320"><p class="title"><strong>Table 6.4. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406617029632" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406619197472" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406619196384" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406619195296" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617029632">
											<p>
												<code class="literal">kind</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619197472">
											<p>
												Kind of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619196384">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619195296">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617029632">
											<p>
												<code class="literal">namespace</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619197472">
											<p>
												Namespace of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619196384">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619195296">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617029632">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619197472">
											<p>
												Name related to the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619196384">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406619195296">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
  {
    "entityReference": "role:default/test",
    "permission": "catalog.entity.create",
    "policy": "use",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  }
]</pre>
								</p></div></dd><dt><span class="term">[POST] /api/permission/policies</span></dt><dd><p class="simpara">
								Creates a permission policy for a specified entity.
							</p><div class="table" id="idm45406617806208"><p class="title"><strong>Table 6.5. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406617799520" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406617798432" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406617797344" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406617796256" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617799520">
											<p>
												<code class="literal">entityReference</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617798432">
											<p>
												Reference values of an entity including <code class="literal">kind</code>, <code class="literal">namespace</code>, and <code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617797344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617796256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617799520">
											<p>
												<code class="literal">permission</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617798432">
											<p>
												Permission from a specific plugin, resource type, or name
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617797344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617796256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617799520">
											<p>
												<code class="literal">policy</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617798432">
											<p>
												Policy action for the permission, such as <code class="literal">create</code>, <code class="literal">read</code>, <code class="literal">update</code>, <code class="literal">delete</code>, or <code class="literal">use</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617797344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617796256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617799520">
											<p>
												<code class="literal">effect</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617798432">
											<p>
												Indication of allowing or not allowing the policy
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617797344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617796256">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow"
  }
]</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">201 Created</pre>
								</p></div></dd><dt><span class="term">[PUT] /api/permission/policies/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Updates a permission policy for a specified entity.
							</p><div class="formalpara"><p class="title"><strong>Request parameters</strong></p><p>
									The request body contains the <code class="literal">oldPolicy</code> and <code class="literal">newPolicy</code> objects:
								</p></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406614396688" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406614395600" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406614394512" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406614393424" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406614396688">
											<p>
												<code class="literal">permission</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614395600">
											<p>
												Permission from a specific plugin, resource type, or name
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614394512">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614393424">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406614396688">
											<p>
												<code class="literal">policy</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614395600">
											<p>
												Policy action for the permission, such as <code class="literal">create</code>, <code class="literal">read</code>, <code class="literal">update</code>, <code class="literal">delete</code>, or <code class="literal">use</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614394512">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614393424">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406614396688">
											<p>
												<code class="literal">effect</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614395600">
											<p>
												Indication of allowing or not allowing the policy
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614394512">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406614393424">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "oldPolicy": [
    {
      "permission": "catalog-entity",
      "policy": "read",
      "effect": "allow"
    },
    {
      "permission": "catalog.entity.create",
      "policy": "create",
      "effect": "allow"
    }
  ],
  "newPolicy": [
    {
      "permission": "catalog-entity",
      "policy": "read",
      "effect": "deny"
    },
    {
      "permission": "policy-entity",
      "policy": "read",
      "effect": "allow"
    }
  ]
}</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">200</pre>
								</p></div></dd><dt><span class="term">[DELETE] /api/permission/policies/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span>?permission={value1}&amp;policy={value2}&amp;effect={value3}</span></dt><dd><p class="simpara">
								Deletes a permission policy added to the specified entity.
							</p><div class="table" id="idm45406616066752"><p class="title"><strong>Table 6.6. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406613875136" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406613874048" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406613872960" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406613871872" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">kind</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Kind of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">namespace</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Namespace of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Name related to the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">permission</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Permission from a specific plugin, resource type, or name
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">policy</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Policy action for the permission, such as <code class="literal">create</code>, <code class="literal">read</code>, <code class="literal">update</code>, <code class="literal">delete</code>, or <code class="literal">use</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406613875136">
											<p>
												<code class="literal">effect</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613874048">
											<p>
												Indication of allowing or not allowing the policy
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613872960">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406613871872">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">204 No Content</pre>
								</p></div></dd><dt><span class="term">[DELETE] /api/permission/policies/<span class="emphasis"><em>&lt;kind&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>/<span class="emphasis"><em>&lt;name&gt;</em></span></span></dt><dd><p class="simpara">
								Deletes all permission policies added to the specified entity.
							</p><div class="table" id="idm45406615925952"><p class="title"><strong>Table 6.7. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406615919264" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406615918176" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406615917088" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406615916000" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406615919264">
											<p>
												<code class="literal">kind</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615918176">
											<p>
												Kind of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615917088">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615916000">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406615919264">
											<p>
												<code class="literal">namespace</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615918176">
											<p>
												Namespace of the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615917088">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615916000">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406615919264">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615918176">
											<p>
												Name related to the entity
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615917088">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406615916000">
											<p>
												Required
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">204 No Content</pre>
								</p></div></dd><dt><span class="term">[GET] /api/permission/plugins/policies</span></dt><dd><p class="simpara">
								Returns permission policies for all static plugins.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "pluginId": "catalog",
    "policies": [
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "read"
      },
      {
        "isResourced": false,
        "permission": "catalog.entity.create",
        "policy": "create"
      },
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "delete"
      },
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "update"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.read",
        "policy": "read"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.create",
        "policy": "create"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.delete",
        "policy": "delete"
      }
    ]
  },
  ...
]</pre>
								</p></div></dd></dl></div></section><section class="section" id="conditional-policies"><div class="titlepage"><div><div><h3 class="title">6.2.3. Conditional policies</h3></div></div></div><p>
					The RBAC REST API supports the following endpoints for managing conditional policies in the Red Hat Developer Hub.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">[GET] /api/permission/plugins/condition-rules</span></dt><dd><p class="simpara">
								Returns available conditional rule parameter schemas for the available plugins that are enabled in Developer Hub.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
   {
      "pluginId": "catalog",
      "rules": [
         {
            "name": "HAS_ANNOTATION",
            "description": "Allow entities with the specified annotation",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "annotation": {
                     "type": "string",
                     "description": "Name of the annotation to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the annotation to match on"
                  }
               },
               "required": [
                  "annotation"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_LABEL",
            "description": "Allow entities with the specified label",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "label": {
                     "type": "string",
                     "description": "Name of the label to match on"
                  }
               },
               "required": [
                  "label"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_METADATA",
            "description": "Allow entities with the specified metadata subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities metadata to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_SPEC",
            "description": "Allow entities with the specified spec subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities spec to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_KIND",
            "description": "Allow entities matching a specified kind",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "kinds": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of kinds to match at least one of"
                  }
               },
               "required": [
                  "kinds"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_OWNER",
            "description": "Allow entities owned by a specified claim",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "claims": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of claims to match at least one on within ownedBy"
                  }
               },
               "required": [
                  "claims"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         }
      ]
   }
   ... &lt;another plugin condition parameter schemas&gt;
]</pre>
								</p></div></dd><dt><span class="term">[GET] /api/permission/roles/conditions/:id</span></dt><dd><p class="simpara">
								Returns conditions for the specified ID.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "id": 1,
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</pre>
								</p></div></dd><dt><span class="term">[GET] /api/permission/roles/conditions</span></dt><dd><p class="simpara">
								Returns list of all conditions for all roles.
							</p><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "id": 1,
    "result": "CONDITIONAL",
    "roleEntityRef": "role:default/test",
    "pluginId": "catalog",
    "resourceType": "catalog-entity",
    "permissionMapping": ["read"],
    "conditions": {
      "anyOf": [
        {
          "rule": "IS_ENTITY_OWNER",
          "resourceType": "catalog-entity",
          "params": {
            "claims": ["group:default/team-a"]
          }
        },
        {
          "rule": "IS_ENTITY_KIND",
          "resourceType": "catalog-entity",
          "params": {
            "kinds": ["Group"]
          }
        }
      ]
    }
  }
]</pre>
								</p></div></dd><dt><span class="term">[POST] /api/permission/roles/conditions</span></dt><dd><p class="simpara">
								Creates a conditional policy for the specified role.
							</p><div class="table" id="idm45406618130208"><p class="title"><strong>Table 6.8. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406618123520" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406618122432" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406618121344" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406618120256" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">result</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Always has the value <code class="literal">CONDITIONAL</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">roleEntityRef</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												String entity reference to the RBAC role, such as <code class="literal">role:default/dev</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">pluginId</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Corresponding plugin ID, such as <code class="literal">catalog</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">permissionMapping</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Array permission action, such as <code class="literal">['read', 'update', 'delete']</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String array
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">resourceType</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Resource type provided by the plugin, such as <code class="literal">catalog-entity</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">conditions</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Condition JSON with parameters or array parameters joined by criteria
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												JSON
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												Name of the role
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406618123520">
											<p>
												<code class="literal">metadata.description</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618122432">
											<p>
												The description of the role
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618121344">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406618120256">
											<p>
												Optional
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["group:default/team-a"]
    }
  }
}</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "id": 1
}</pre>
								</p></div></dd><dt><span class="term">[PUT] /permission/roles/conditions/:id</span></dt><dd><p class="simpara">
								Updates a condition policy for a specified ID.
							</p><div class="table" id="idm45406617844704"><p class="title"><strong>Table 6.9. Request parameters</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 45%; " class="col_2"/><col style="width: 15%; " class="col_3"/><col style="width: 25%; " class="col_4"/></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm45406617838016" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm45406617836928" scope="col">Description</th><th style="text-align: left; vertical-align: top; " id="idm45406617835840" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm45406617834752" scope="col">Presence</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">result</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Always has the value <code class="literal">CONDITIONAL</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">roleEntityRef</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												String entity reference to the RBAC role, such as <code class="literal">role:default/dev</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">pluginId</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Corresponding plugin ID, such as <code class="literal">catalog</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">permissionMapping</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Array permission action, such as <code class="literal">['read', 'update', 'delete']</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String array
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">resourceType</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Resource type provided by the plugin, such as <code class="literal">catalog-entity</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">conditions</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Condition JSON with parameters or array parameters joined by criteria
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												JSON
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">name</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												Name of the role
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Required
											</p>
											</td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm45406617838016">
											<p>
												<code class="literal">metadata.description</code>
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617836928">
											<p>
												The description of the role
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617835840">
											<p>
												String
											</p>
											</td><td style="text-align: left; vertical-align: top; " headers="idm45406617834752">
											<p>
												Optional
											</p>
											</td></tr></tbody></table></div></div><div class="formalpara"><p class="title"><strong>Example request body (JSON)</strong></p><p>
									
<pre class="programlisting language-json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">200</pre>
								</p></div></dd><dt><span class="term">[DELETE] /api/permission/roles/conditions/:id</span></dt><dd><p class="simpara">
								Deletes a conditional policy for the specified ID.
							</p><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="screen">204</pre>
								</p></div></dd></dl></div></section><section class="section" id="user-statistics"><div class="titlepage"><div><div><h3 class="title">6.2.4. User statistics</h3></div></div></div><p>
					The <code class="literal">licensed-users-info-backend</code> plugin exposes various REST API endpoints to retrieve data related to logged-in users.
				</p><p>
					No additional configuration is required for the <code class="literal">licensed-users-info-backend</code> plugin. If the RBAC backend plugin is enabled, then an administrator role must be assigned to access the endpoints, as the endpoints are protected by the <code class="literal">policy.entity.read</code> permission.
				</p><p>
					The base URL for user statistics endpoints is <code class="literal">http://SERVER:PORT/api/licensed-users-info</code>, such as <code class="literal">http://localhost:7007/api/licensed-users-info</code>.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">[GET] /users/quantity</span></dt><dd><p class="simpara">
								Returns the total number of logged-in users.
							</p><div class="formalpara"><p class="title"><strong>Example request</strong></p><p>
									
<pre class="programlisting language-bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users/quantity" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $token"</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="programlisting language-json">{ "quantity": "2" }</pre>
								</p></div></dd><dt><span class="term">[GET] /users</span></dt><dd><p class="simpara">
								Returns a list of logged-in users with their details.
							</p><div class="formalpara"><p class="title"><strong>Example request</strong></p><p>
									
<pre class="programlisting language-bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $token"</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="programlisting language-json">[
  {
    "userEntityRef": "user:default/dev",
    "lastTimeLogin": "Thu, 22 Aug 2024 16:27:41 GMT",
    "displayName": "John Leavy",
    "email": "dev@redhat.com"
  }
]</pre>
								</p></div></dd><dt><span class="term">[GET] /users</span></dt><dd><p class="simpara">
								Returns a list of logged-in users in CSV format.
							</p><div class="formalpara"><p class="title"><strong>Example request</strong></p><p>
									
<pre class="programlisting language-bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users" \
-H "Content-Type: text/csv" \
-H "Authorization: Bearer $token"</pre>
								</p></div><div class="formalpara"><p class="title"><strong>Example response</strong></p><p>
									
<pre class="programlisting language-csv">userEntityRef,displayName,email,lastTimeLogin
user:default/dev,John Leavy,dev@redhat.com,"Thu, 22 Aug 2024 16:27:41 GMT"</pre>
								</p></div></dd></dl></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm45406615466032"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>