<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Installing Red Hat Developer Hub in an air-gapped environment</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Platform administrators can configure roles, permissions, and other settings to enable other authorized users to deploy an air-gapped Developer Hub instance on any supported platform using either the Operator or Helm chart."/><link rel="next" href="#con-airgapped-environment_title-install-rhdh-air-grapped" title="1. Air-gapped environment"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46008844365600"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.5</span></div><div><h1 class="title">Installing Red Hat Developer Hub in an air-gapped environment</h1></div><div><h3 class="subtitle"><em>Running Red Hat Developer Hub on Red Hat OpenShift Container Platform in a networik restricted environment by using either the Operator or Helm chart.</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46008825624304">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Platform administrators can configure roles, permissions, and other settings to enable other authorized users to deploy an air-gapped Developer Hub instance on any supported platform using either the Operator or Helm chart.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#con-airgapped-environment_title-install-rhdh-air-grapped">1. Air-gapped environment</a></span></li><li><span class="section"><a href="#proc-install-rhdh-airgapped-environment-ocp-operator_title-install-rhdh-air-grapped">2. Installing Red Hat Developer Hub in an air-gapped environment with the Operator</a></span><ul><li><span class="section"><a href="#installing-red-hat-developer-hub-on-openshift-container-platform-in-a-partially-disconnected-environment-with-the-operator">2.1. Installing Red Hat Developer Hub on OpenShift Container Platform in a partially disconnected environment with the Operator</a></span></li><li><span class="section"><a href="#installing-red-hat-developer-hub-on-openshift-container-platform-in-a-fully-disconnected-environment-with-the-operator">2.2. Installing Red Hat Developer Hub on OpenShift Container Platform in a fully disconnected environment with the Operator</a></span></li></ul></li><li><span class="section"><a href="#proc-install-rhdh-airgapped-environment-ocp-helm_title-install-rhdh-air-grapped">3. Installing Red Hat Developer Hub in an air-gapped environment with the Helm Chart</a></span></li></ul></div><section class="section" id="con-airgapped-environment_title-install-rhdh-air-grapped"><div class="titlepage"><div><div><h2 class="title">1. Air-gapped environment</h2></div></div></div><p>
			An air-gapped environment, also known as an air-gapped network or isolated network, ensures security by physically segregating the system or network. This isolation is established to prevent unauthorized access, data transfer, or communication between the air-gapped system and external sources.
		</p><p>
			You can install the Red Hat Developer Hub in an air-gapped environment to ensure security and meet specific regulatory requirements.
		</p></section><section class="section" id="proc-install-rhdh-airgapped-environment-ocp-operator_title-install-rhdh-air-grapped"><div class="titlepage"><div><div><h2 class="title">2. Installing Red Hat Developer Hub in an air-gapped environment with the Operator</h2></div></div></div><p>
			You can install Red Hat Developer Hub in a fully disconnected or partially disconnected environment using the Red Hat Developer Hub Operator. For a list of supported platforms, see the <a class="link" href="https://access.redhat.com/support/policy/updates/developerhub">Red Hat Developer Hub Life Cycle page</a>.
		</p><section class="section" id="installing-red-hat-developer-hub-on-openshift-container-platform-in-a-partially-disconnected-environment-with-the-operator"><div class="titlepage"><div><div><h3 class="title">2.1. Installing Red Hat Developer Hub on OpenShift Container Platform in a partially disconnected environment with the Operator</h3></div></div></div><p>
				On an OpenShift Container Platform cluster operating on a restricted network, public resources are not available. However, deploying the Red Hat Developer Hub Operator and running Developer Hub requires the following public resources:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Operator images (bundle, operator, catalog)
					</li><li class="listitem">
						Operands images (RHDH, PostgreSQL)
					</li></ul></div><p>
				To make these resources available, replace them with their equivalent resources in a mirror registry accessible to your cluster.
			</p><p>
				You can use a helper script that mirrors the necessary images and provides the necessary configuration to ensure those images will be used when installing the Red Hat Developer Hub Operator and creating Developer Hub instances. This script requires a target mirror registry. You likely have a target mirror registry ready to use if your cluster is already operating on a disconnected network. If you do not already have a target registry, and if you have an OpenShift Container Platform cluster, you might want to expose and leverage the internal cluster registry.
			</p><p>
				If you are connected to a OpenShift Container Platform cluster, the helper script will detect it and will automatically expose the cluster registry. However, if you are connected to a Kubernetes cluster, you can manually specify the target registry that you want to mirror the images to.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an active <code class="literal">oc registry</code> session to the <code class="literal">registry.redhat.io</code> Red Hat Ecosystem Catalog. For more information, see <a class="link" href="https://access.redhat.com/RegistryAuthentication">Red Hat Container Registry Authentication</a>.
					</li><li class="listitem">
						You have an active <code class="literal">skopeo</code> session with administrative access to the target mirror registry. For more information, see <a class="link" href="https://github.com/containers/skopeo#authenticating-to-a-registry">Authenticating to a registry</a>.
					</li><li class="listitem">
						You have installed the <code class="literal">opm</code> CLI tool. For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/cli_tools/opm-cli#olm-about-opm_cli-opm-install">Installing the opm CLI</a>.
					</li><li class="listitem">
						You have installed Podman 5.3 or later. For more information, see <a class="link" href="https://podman.io/docs/installation">Podman Installation Instructions</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In your terminal, navigate to the directory where you want to save the mirroring script.
					</li><li class="listitem"><p class="simpara">
						Download the mirroring script by running the following command:
					</p><pre class="programlisting language-terminal">curl -sSLO https://raw.githubusercontent.com/redhat-developer/rhdh-operator/refs/heads/release-1.5/.rhdh/scripts/prepare-restricted-environment.sh</pre></li><li class="listitem"><p class="simpara">
						Run the mirroring script by running the <code class="literal">bash</code> command with the appropriate set of options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you do not already have a target mirror registry and want the script to create one for you, use the following example:
							</p><pre class="programlisting language-terminal">bash prepare-restricted-environment.sh \
   --prod_operator_index "registry.redhat.io/redhat/redhat-operator-index:v4.18" \
   --prod_operator_package_name "rhdh" \
   --prod_operator_bundle_name "rhdh-operator" \
   --prod_operator_version "v1.5.0" \</pre></li><li class="listitem"><p class="simpara">
								If you want to use an existing target mirror registry, specify it with the <code class="literal">--use_existing_mirror_registry</code> option. For example:
							</p><pre class="programlisting language-terminal">bash prepare-restricted-environment.sh \
   --prod_operator_index "registry.redhat.io/redhat/redhat-operator-index:v4.18" \
   --prod_operator_package_name "rhdh" \
   --prod_operator_bundle_name "rhdh-operator" \
   --prod_operator_version "v1.5.0" \
   --use_existing_mirror_registry "<span class="emphasis"><em>&lt;my_registry&gt;</em></span>"</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The script can take several minutes to complete as it copies multiple images to the mirror registry.
								</p></div></div></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are using Red Hat OpenShift Container Platform, the Red Hat Developer Hub Operator is in the <span class="strong strong"><strong>Installed Operators</strong></span> list in the web console.
					</li><li class="listitem"><p class="simpara">
						If you are using a supported Kubernetes platform, you can check the list of pods running in the <code class="literal">rhdh-operator</code> namespace by running the following command in your terminal:
					</p><pre class="programlisting language-terminal">kubectl -n rhdh-operator get pods</pre></li></ul></div></section><section class="section" id="installing-red-hat-developer-hub-on-openshift-container-platform-in-a-fully-disconnected-environment-with-the-operator"><div class="titlepage"><div><div><h3 class="title">2.2. Installing Red Hat Developer Hub on OpenShift Container Platform in a fully disconnected environment with the Operator</h3></div></div></div><p>
				If your network has access to the registry through a bastion host or physical disk, you can use the Operator to install Red Hat Developer Hub by mirroring specified resources and transferring them to your air-gapped environment without any connection to the internet.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have set up your disconnected environment.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You have mirrored all of the required images to disk.
							</li><li class="listitem">
								You have manually transferred the mirror folder to the network of the disconnected mirror registry.
							</li><li class="listitem">
								You have mirrored the images from disk to the target mirror registry in your disconnected environment.
							</li><li class="listitem">
								You have installed the Operator in your disconnected environment.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						You have set up your workstation.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You have an active <code class="literal">oc registry</code> session to the <code class="literal">registry.redhat.io</code> Red Hat Ecosystem Catalog. For more information, see <a class="link" href="https://access.redhat.com/RegistryAuthentication">Red Hat Container Registry Authentication</a>.
							</li><li class="listitem">
								You have installed the <code class="literal">opm</code> CLI tool. For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/cli_tools/opm-cli#olm-about-opm_cli-opm-install">Installing the opm CLI</a>.
							</li><li class="listitem">
								You have installed Podman 5.3 or later. For more information, see <a class="link" href="https://podman.io/docs/installation">Podman Installation Instructions</a>.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download the mirroring script to disk by running the following command:
					</p><pre class="programlisting language-terminal">curl -sSLO https://raw.githubusercontent.com/redhat-developer/rhdh-operator/refs/heads/release-1.5/.rhdh/scripts/prepare-restricted-environment.sh</pre></li><li class="listitem"><p class="simpara">
						Run the mirroring script by running the <code class="literal">bash</code> command with the appropriate set of options:
					</p><pre class="programlisting language-terminal">bash prepare-restricted-environment.sh \
    --index-image "quay.io/rhdh/iib:next-v4.18-x86_64" \
    --ci-index true \
    --to-dir <span class="emphasis"><em>&lt;my_pulled_image_location&gt;</em></span> \
    [--filter-versions '*'] \
    [--use-oc-mirror true]</pre><p class="simpara">
						where
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>&lt;my_pulled_image_location&gt;</em></span> </span></dt><dd><p class="simpara">
									Specifies the directory where you want to pull all of the necessary images with the <code class="literal">--to-dir</code> option, for example, my.registry.example.com/namespace
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The script can take several minutes to complete as it copies multiple images to the mirror registry.
									</p></div></div></dd></dl></div></li><li class="listitem">
						Transfer the directory specified by the <code class="literal">--to-dir</code> option to your disconnected environment.
					</li><li class="listitem"><p class="simpara">
						From a machine in your disconnected environment that has access to both the cluster and the target mirror registry, download the mirroring script from disk by running the following command:
					</p><pre class="programlisting language-terminal">curl -sSLO https://raw.githubusercontent.com/redhat-developer/rhdh-operator/refs/heads/release-1.5/.rhdh/scripts/prepare-restricted-environment.sh</pre></li><li class="listitem"><p class="simpara">
						Run the mirroring script by running the <code class="literal">bash</code> command with the appropriate set of options:
					</p><pre class="programlisting language-terminal">bash prepare-restricted-environment.sh \
    --from-dir <span class="emphasis"><em>&lt;my_pulled_image_location&gt;</em></span> \
    [--to-registry <span class="emphasis"><em>&lt;my.registry.example.com&gt;</em></span>/<span class="emphasis"><em>&lt;namespace&gt;</em></span>] \
    [--use-oc-mirror true]</pre><p class="simpara">
						where
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>&lt;my_pulled_image_location&gt;</em></span> </span></dt><dd>
									Specifies the directory where you want to pull all of the necessary images with the <code class="literal">--to-dir</code> option.
								</dd><dt><span class="term"><span class="emphasis"><em>&lt;my.registry.example.com&gt;</em></span> </span></dt><dd>
									Specifies the URL for the target mirror registry where you want to mirror the images.
								</dd><dt><span class="term"><span class="emphasis"><em>&lt;namespace&gt;</em></span> </span></dt><dd><p class="simpara">
									Specifies the target namespace where you want to mirror the images.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										If you used <code class="literal">oc-mirror</code> to mirror the images to disk, you must also use <code class="literal">oc-mirror</code> to mirror the images from disk due to the folder layout that <code class="literal">oc-mirror</code> uses.
									</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The script can take several minutes to complete as it automatically installs the Red Hat Developer Hub Operator.
									</p></div></div></dd></dl></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If you are using Red Hat OpenShift Container Platform, the Red Hat Developer Hub Operator is in the <span class="strong strong"><strong>Installed Operators</strong></span> list in the web console.
					</li><li class="listitem"><p class="simpara">
						If you are using a supported Kubernetes platform, you can check the list of pods running in the <code class="literal">rhdh-operator</code> namespace by running the following command in your terminal:
					</p><pre class="programlisting language-terminal">kubectl -n rhdh-operator get pods</pre></li></ul></div></section></section><section class="section" id="proc-install-rhdh-airgapped-environment-ocp-helm_title-install-rhdh-air-grapped"><div class="titlepage"><div><div><h2 class="title">3. Installing Red Hat Developer Hub in an air-gapped environment with the Helm Chart</h2></div></div></div><p>
			An air-gapped environment, also known as an air-gapped network or isolated network, ensures security by physically segregating the system or network. This isolation is established to prevent unauthorized access, data transfer, or communication between the air-gapped system and external sources.
		</p><p>
			You can install Red Hat Developer Hub in an air-gapped environment to ensure security and meet specific regulatory requirements.
		</p><p>
			To install Developer Hub in an air-gapped environment, you must have access to the <code class="literal">registry.redhat.io</code> and the registry for the air-gapped environment.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have installed an Red Hat OpenShift Container Platform 4.14 or later.
				</li><li class="listitem">
					You have access to the <code class="literal">registry.redhat.io</code>.
				</li><li class="listitem">
					You have access to the Red Hat OpenShift Container Platform image registry of your cluster. For more information about exposing the image registry, see the Red Hat OpenShift Container Platform documentation about <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html-single/registry/index#securing-exposing-registry">Exposing the registry</a>.
				</li><li class="listitem">
					You have installed the OpenShift CLI (<code class="literal">oc</code>) on your workstation.
				</li><li class="listitem">
					You have installed the <code class="literal">podman</code> command line tools on your workstation.
				</li><li class="listitem">
					You you have an account in <a class="link" href="https://developers.redhat.com/">Red Hat Developer</a> portal.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Log in to your OpenShift Container Platform account using the OpenShift CLI (<code class="literal">oc</code>), by running the following command:
				</p><pre class="programlisting language-terminal">oc login -u &lt;user&gt; -p &lt;password&gt; https://api.&lt;hostname&gt;:6443</pre></li><li class="listitem"><p class="simpara">
					Log in to the OpenShift Container Platform image registry using the <code class="literal">podman</code> command line tool, by running the following command:
				</p><pre class="programlisting language-terminal">podman login -u kubeadmin -p $(oc whoami -t) default-route-openshift-image-registry.&lt;hostname&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can run the following commands to get the full host name of the OpenShift Container Platform image registry, and then use the host name in a command to log in:
					</p><pre class="programlisting language-terminal">REGISTRY_HOST=$(oc get route default-route -n openshift-image-registry --template='{{ .spec.host }}')</pre><pre class="programlisting language-terminal">podman login -u kubeadmin -p $(oc whoami -t) $REGISTRY_HOST</pre></div></div></li><li class="listitem"><p class="simpara">
					Log in to the <code class="literal">registry.redhat.io</code> in <code class="literal">podman</code> by running the following command:
				</p><pre class="programlisting language-terminal">podman login registry.redhat.io</pre><p class="simpara">
					For more information about registry authentication, see <a class="link" href="https://access.redhat.com/RegistryAuthentication">Red Hat Container Registry Authentication</a>.
				</p></li><li class="listitem"><p class="simpara">
					Pull Developer Hub and PostgreSQL images from <a class="link" href="https://catalog.redhat.com/software/containers/search">Red Hat Image registry</a> to your workstation, by running the following commands:
				</p><pre class="programlisting language-terminal numbered">podman pull registry.redhat.io/rhdh/rhdh-hub-rhel9:1.5</pre><pre class="programlisting language-terminal numbered">podman pull registry.redhat.io/rhel9/postgresql-15:latest</pre></li><li class="listitem"><p class="simpara">
					Push both images to the internal OpenShift Container Platform image registry by running the following commands:
				</p><pre class="programlisting language-terminal numbered">podman push --remove-signatures registry.redhat.io/rhdh/rhdh-hub-rhel9:1.5 default-route-openshift-image-registry.&lt;hostname&gt;/&lt;project_name&gt;/rhdh-hub-rhel9:1.5</pre><pre class="programlisting language-terminal">podman push --remove-signatures registry.redhat.io/rhel9/postgresql-15:latest default-route-openshift-image-registry.&lt;hostname&gt;/&lt;project_name&gt;/postgresql-15:latest</pre><p class="simpara">
					For more information about pushing images directly to the OpenShift Container Platform image registry, see <a class="link" href="https://access.redhat.com/solutions/6959306">How do I push an Image directly into the OpenShift 4 registry</a>.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If an x509 error occurs, verify that you have <a class="link" href="https://access.redhat.com/solutions/6088891">installed the CA certificate used for OpenShift Container Platform routes on your system</a>.
					</p></div></div></li><li class="listitem"><p class="simpara">
					Use the following command to verify that both images are present in the internal OpenShift Container Platform registry:
				</p><pre class="programlisting language-terminal">oc get imagestream -n {my-product-namespace}</pre></li><li class="listitem"><p class="simpara">
					Enable local image lookup for both images by running the following commands:
				</p><pre class="programlisting language-terminal">oc set image-lookup postgresql-15</pre><pre class="programlisting language-terminal">oc set image-lookup  rhdh-hub-rhel9</pre></li><li class="listitem"><p class="simpara">
					Go to <span class="strong strong"><strong>YAML view</strong></span> and update the <code class="literal">image</code> section for <code class="literal">backstage</code> and <code class="literal">postgresql</code> using the following values:
				</p><div class="formalpara"><p class="title"><strong>Example values for Developer Hub image</strong></p><p>
						
<pre class="programlisting language-yaml">upstream:
  backstage:
    image:
      registry: ""
      repository: rhdh-hub-rhel9
      tag: latest</pre>
					</p></div><div class="formalpara"><p class="title"><strong>Example values for PostgreSQL image</strong></p><p>
						
<pre class="programlisting language-yaml">upstream:
  postgresql:
    image:
      registry: ""
      repository: postgresql-15
      tag: latest</pre>
					</p></div></li><li class="listitem">
					Install the Red Hat Developer Hub using Helm chart.
				</li></ol></div></section><div><div xml:lang="en-US" class="legalnotice" id="idm46008825624304"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>