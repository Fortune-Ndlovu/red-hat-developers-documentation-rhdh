<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Authentication</title>
<style>
/* Red Hat Fonts */
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}

/* Positioning toc and content */
@media screen and (min-width: 768px) {
  body.toc2 {
    padding-left: 400px;
    padding-right: 0;
  }
}
@media screen and (min-width: 768px) {
  #toc.toc2 {
    margin-top: 0 !important;
    position: fixed;
    width: 319px;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
}

/* Style borrowed from docs.redhat.com and adapted to the HTML structure */

#toc.toc2 {
  background:#f2f2f2;
  justify-content:space-between;
  margin:1rem 0 2rem;
  padding:1rem
}
#toctitle {
  font-size:1.25rem;
  font-weight:400;
  line-height:1.6667;
  margin-top:0;
  text-transform:none
}
#toc li {
  margin-bottom:.25em;
  padding-left:0;
  list-style:none;
}
#toc a,
#toc a:visited {
  color:black;
  display:inline-block;
  text-decoration:none;
}

.sectlevel1 {
  padding-left:0;
}

.sectlevel2,
.sectlevel3,
.sectlevel4,
.sectlevel5 {
  padding-left:1em;
}

h3 {
  color:#464646;
  font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);
  font-size:var(--rh-font-size-body-text-lg,1.125rem)
}

li {
  display:list-item;
  margin:0;
  padding:0;
  text-align:-webkit-match-parent
}

*,
:after,
:before,
:after,
:before {
  box-sizing:border-box
}
img,
object,
svg,
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
hr {
  border:0;
  border-top:.0625rem solid #d2d2d2;
  clear:both;
  margin:1rem 0
}
a {
  color:#06c;
  text-decoration:underline
}
a:focus,
a:hover {
  color:#036
}
p {
  margin:1.49963rem 0
}
li>p {
  margin:0
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-weight:400;
  margin:0 0 .625rem;
  color:#464646;
}
h1 {
  font-size:2rem;
  margin:2rem 0
}
h2 {
  font-size:2rem;
  margin:2rem 0
}
h3 {
  font-size:1.65rem;
  font-weight:400
}
h4 {
  font-size:1.5rem
}
h5 {
  font-size:1.25rem
  font-weight:400
}
h6 {
  font-size:1.125rem;
  font-weight:500;
  line-height:1.6667
}
ol ::marker,
ul ::marker {
  font:inherit
}
li {
  margin:0 0 .5em;
  padding:0
}
li>p {
  margin:.5rem 0
}
li>ol,
li>ul {
  margin:0
}
dl dd {
  margin:.5rem 0 .5rem 1rem
}
dl dd>p {
  margin:.5rem 0
}
.informaltable,
.table-contents,
.table-wrapper {
  max-height:var(--rh-table--maxHeight);
  overflow:auto
}
table {
  border:0;
  font-size:1rem;
  line-height:1.6667;
  table-layout:fixed
}
table caption {
  color:#585858;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:left
}
table td,
table th {
  border:0;
  border-bottom:.0625rem solid #d2d2d2;
  border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);
  padding:.5em 1rem
}
table td.halign-left,
table th.halign-left {
  text-align:left
}
table td.halign-center,
table th.halign-center,
table td.halign-center,
table th.halign-center {
  text-align:center
}
table td.halign-right,
table th.halign-right {
  text-align:right
}
table td.valign-top,
table th.valign-top {
  vertical-align:top
}
table td.valign-middle,
table th.valign-middle {
  vertical-align:middle
}
table td.valign-bottom,
table th.valign-bottom {
  vertical-align:bottom
}
table thead td,
table thead th {
  background:#f5f5f5;
  font-weight:600
}
rh-table table,
rh-table.rh-table--expanded-vertically {
  max-height:-moz-max-content;
  max-height:max-content
}
pre.nowrap {
  overflow:auto;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
.listingblock pre {
  background:transparent
}

[class] pre code {
  background:inherit;
  color:inherit;
  font-family:inherit;
  font-size:inherit;
  font-weight:inherit;
  line-height:inherit;
  padding:0
}
.keycap,
kbd {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
.keycap strong,
.keycap strong {
  font-weight:inherit
}
kbd.keyseq,
kbd.keyseq {
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0
}
kbd.keyseq kbd,
kbd.keyseq kbd {
  display:inline-block;
  margin:0 .375rem
}
kbd.keyseq kbd:first-child,
kbd.keyseq kbd:first-child {
  margin-left:0
}
b.button {
  font-size:90%;
  font-weight:700;
  padding:.1875rem
}
b.button:before {
  content:"["
}
b.button:after {
  content:"]"
}
html {
  font-family:sans-serif;
  -ms-text-size-adjust:100%;
  -webkit-text-size-adjust:100%
}
body {
  margin:0
}
audio,
canvas,
progress,
video {
  display:inline-block;
  vertical-align:baseline
}
audio:not([controls]) {
  display:none;
  height:0
}
[hidden],
template {
  display:none
}
a {
  background:transparent
}
a:active,
a:hover {
  outline:0
}
abbr[title] {
  border-bottom:.0625rem dotted
}
dfn {
  font-style:italic
}

mark {
  background:#ff0;
  color:#000
}
small {
  font-size:80%
}
sub,
sup {
  font-size:75%;
  line-height:0;
  position:relative;
  vertical-align:baseline
}
sup {
  top:-.5em
}
sub {
  bottom:-.25em
}
img {
  border:0
}
svg:not(:root) {
  overflow:hidden
}
figure {
  margin:1em 2.5rem
}
hr {
  box-sizing:content-box;
  height:0
}
code,
kbd,
pre,
samp {
  font-family:monospace,monospace;
  font-size:1em
}
button,
optgroup,
select,
textarea,
.rhdocsinput {
  color:inherit;
  font:inherit;
  margin:0
}
button {
  overflow:visible
}
button,
select {
  text-transform:none
}
button,
html input[type=button],
input[type=reset],
input[type=submit] {
  -moz-appearance:button;
  appearance:button;
  -webkit-appearance:button;
  cursor:pointer
}
button[disabled],
html input[disabled] {
  cursor:default
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border:0;
  padding:0
}
input {
  line-height:normal
}
input[type=checkbox],
input[type=radio] {
  box-sizing:border-box;
  padding:0
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  height:auto
}
input[type=search] {
  -moz-appearance:textfield;
  appearance:textfield;
  -webkit-appearance:textfield;
  box-sizing:content-box
}
input[type=search]::-webkit-search-cancel-button,
input[type=search]::-webkit-search-decoration {
  -webkit-appearance:none
}
fieldset {
  border:.0625rem solid silver;
  margin:0 .125rem;
  padding:.35em .625em .75em
}
legend {
  border:0;
  padding:0
}
textarea {
  overflow:auto
}
optgroup {
  font-weight:700
}
table {
  border-collapse:collapse;
  border-spacing:0
}
td,
th {
  padding:0
}

.admonitionblock>div:nth-child(2),
.caution>div:nth-child(2),
.important>div:nth-child(2),
.note>div:nth-child(2),
.tip>div:nth-child(2),
.warning>div:nth-child(2) {
  margin:.5rem 0
}
.admonitionblock>div:nth-child(2)>:first-child,
.caution>div:nth-child(2)>:first-child,
.important>div:nth-child(2)>:first-child,
.note>div:nth-child(2)>:first-child,
.tip>div:nth-child(2)>:first-child,
.warning>div:nth-child(2)>:first-child {
  margin-top:0
}
.admonitionblock>div:nth-child(2)>:last-child,
.caution>div:nth-child(2)>:last-child,
.important>div:nth-child(2)>:last-child,
.note>div:nth-child(2)>:last-child,
.tip>div:nth-child(2)>:last-child,
.warning>div:nth-child(2)>:last-child {
  margin-bottom:0
}
.listingblock+.listingblock,
pre+pre,
pre[class]+pre[class] {
  margin-top:2rem
}
.listingblock {
  background:#f8f8f8;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0;
  border: 1px solid grey;
  border-radius:.1rem;
}
.listingblock:before {
  background-repeat:no-repeat;
  background-size:6.25rem 100%;
  bottom:var(--scrollbar__height,1px);
  content:"";
  display:block;
  height:7.125rem;
  max-height:100%;
  max-height:calc(100% - var(--scrollbar__height, 2px));
  position:absolute;
  right:var(--scrollbar__width,6px);
  top:.0625rem;
  width:4.0625rem;
  z-index:1
}

.colist>ol {
  counter-reset:colist;
  list-style:none;
  margin:1rem 0 2rem;
  padding:0
}
.colist>ol>li {
  counter-increment:colist;
  margin:.5rem 0;
  padding-left:1.75rem;
  position:relative;
}
.colist>ol>li:before {
  content:counter(colist);
  left:0;
  position:absolute;
  top:.1875rem
}
.colist>ol>li:before,
.conum {
  background:#06c;
  border-radius:50%;
  color:#fff;
  display:inline-block;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-style:normal;
  font-weight:600;
  height:1.25rem;
  line-height:1.35rem;
  padding:0;
  text-align:center;
  top:-.125em;
  vertical-align:middle;
  width:1.25rem
}
.colist div.paragraph {
  margin:0
}

rh-table {
  display:block
}
::-webkit-scrollbar,
:host ::-webkit-scrollbar {
  height:.625rem;
  width:.625rem
}
::-webkit-scrollbar,
::-webkit-scrollbar-track,
:host ::-webkit-scrollbar,
:host ::-webkit-scrollbar-track {
  background-color:#d6d6d6
}
::-webkit-scrollbar-thumb,
:host ::-webkit-scrollbar-thumb {
  background-color:#8e8e8e
}
*,
:host * {
  scrollbar-color:#8e8e8e #d6d6d6
}
p:empty,
p:empty {
  display:none
}
.book {
  font-size: var(--rh-font-size-body-text-lg,1.125rem);
  font-weight: var(--rh-font-weight-body-text-regular,400);
  line-height: 1.6667;
  padding-left: 6rem;
  padding-right: 6rem;
  padding-top: var(--rh-space-3xl,4rem);
  max-width: 1400px;
}

.book[class] h1 code,
.book[class] h2 code,
.book[class] h3 code,
.book[class] h4 code,
.book[class] h5 code,
.book[class] h6 code,
[class] h1 code,
[class] h2 code,
[class] h3 code,
[class] h4 code,
[class] h5 code,
[class] h6 code {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
details[class] {
  list-style:none;
  margin:1rem 0 3rem;
  padding:0
}

.preamble {
  margin:0 0 2rem
}
.sect1 {
  margin:2rem 0 1rem
}
:host .sect1,
cp-documentation .sect1 {
  margin:0 0 2rem;
  padding:.0625rem 0 0
}
:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,
:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child {
  margin-top:0
}
.listingblock,
.literalblock {
  margin:1rem 0
}
.quoteblock,
.verseblock {
  border-left:.25rem solid #d2d2d2;
  margin:1rem 0;
  padding:1rem 1rem 1rem 2rem
}
.quoteblock.pullleft,
.verseblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .quoteblock.pullleft,
  .verseblock.pullleft {
    margin-left:-1rem
  }
}
.quoteblock.pullright,
.verseblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-10rem
  }
}
.quoteblock>:first-child,
.verseblock>:first-child {
  margin-top:0
}
.quoteblock .content,
.verseblock .content {
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.25rem;
  line-height:1.6667
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size:.875rem;
  font-style:italic;
  font-weight:600;
  line-height:1.6667;
  text-transform:uppercase
}
.quoteblock .attribution .citetitle,
.verseblock .attribution .citetitle {
  color:#585858
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  font-size:1em
}
.quoteblock blockquote {
  font-style:italic;
  margin:0;
  padding:0
}
.quoteblock blockquote .content>:first-child {
  margin-top:0
}
.quoteblock blockquote .content>:first-child:before {
  color:#e00;
  content:"â€œ";
  display:block;
  float:left;
  font-size:2.75rem;
  font-style:normal;
  line-height:1.125em;
  margin-right:.5rem
}
.quoteblock blockquote .content>:first-child .content>:first-child:before {
  content:none
}
.imageblock {
  margin:1rem 0
}
.imageblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .imageblock.pullleft {
    margin-left:-1rem
  }
}
.imageblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .imageblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .imageblock.pullright {
    margin-right:-10rem
  }
}
.imageblock.interrupter {
  margin:2rem 0
}
@media (min-width:768px) {
  .imageblock.interrupter {
    margin-left:-1rem;
    margin-right:-2rem
  }
  .imageblock.interrupter .caption {
    margin-left:1rem;
    margin-right:2rem
  }
}
@media (min-width:1100px) {
  .imageblock.interrupter {
    margin-right:-10rem
  }
  .imageblock.interrupter .caption {
    margin-right:10rem
  }
}
.imageblock.interrupter img {
  max-width:100%
}
.imageblock .caption {
  color:#585858;
  display:block;
  font-size:.875rem;
  line-height:1.6667;
  margin:.5rem 0 0
}
.rhdocs-footnotes {
  border-top:.0625rem solid #d2d2d2;
  margin:3rem 0 1rem;
  padding:1rem 0 0
}
.rhdocs-footnotes>ol {
  margin:0;
  padding:0 0 0 1.5rem
}
@supports (counter-reset:footnotenum) {
  .rhdocs-footnotes>ol {
    counter-reset:footnotenum;
    list-style:none;
    padding:0
  }
  .rhdocs-footnotes>ol>li {
    counter-increment:footnotenum
  }
  .rhdocs-footnotes>ol>li:before {
    color:#585858;
    content:"[" counter(footnotenum) "]";
    display:inline-block;
    margin-right:.25rem
  }
}
#footer {
  background:#ededed;
  color:#151515;
  font-size:.875rem;
  line-height:1.6667;
  margin:3rem 0 0;
  padding:1rem
}
.center {
  margin-left:auto;
  margin-right:auto
}
.stretch {
  width:100%
}

pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.language-none,
code.language-text,
code.language-txt,
pre.language-none,
pre.language-text,
pre.language-txt {
  color:#151515
}
code[class*=language-] ::-moz-selection,
code[class*=language-]::-moz-selection,
pre[class*=language-] ::-moz-selection,
pre[class*=language-]::-moz-selection {
  background:#cceae7;
  color:#263238
}
code[class*=language-] ::selection,
code[class*=language-]::selection,
pre[class*=language-] ::selection,
pre[class*=language-]::selection {
  background:#cceae7;
  color:#263238
}
:not(pre)>code[class*=language-] {
  border-radius:.2em;
  padding:.1em;
  white-space:normal
}
.token.atrule {
  color:#40199a
}
.token.attr-name {
  color:#06c
}
.token.attr-value,
.token.attribute {
  color:#b300b3
}
.token.boolean {
  color:#40199a
}
.token.builtin,
.token.cdata,
.token.char,
.token.class,
.token.class-name {
  color:#06c
}
.token.comment {
  color:#6a6e73
}
.token.constant {
  color:#40199a
}
.token.deleted {
  color:#c9190b
}
.token.doctype {
  color:#6a6e73
}
.token.entity {
  color:#c9190b
}
.token.function {
  color:#40199a
}
.token.hexcode {
  color:#b300b3
}
.token.id,
.token.important {
  color:#40199a;
  font-weight:700
}
.token.inserted {
  color:#06c
}
.token.keyword {
  color:#40199a
}
.token.number {
  color:#b300b3
}
.token.operator {
  color:#06c
}
.token.prolog {
  color:#6a6e73
}
.token.property {
  color:#06c
}
.token.pseudo-class,
.token.pseudo-element {
  color:#b300b3
}
.token.punctuation,
.token.regex {
  color:#06c
}
.token.selector {
  color:#c9190b
}
.token.string {
  color:#b300b3
}
.token.symbol {
  color:#40199a
}
.token.unit {
  color:#b300b3
}
.token.url,
.token.variable {
  color:#c9190b
}

@media print {
  .field code,
  .field pre,
  code[class*=language-],
  pre,
  pre[class*=language-] {
    white-space:pre-wrap!important;
    word-wrap:break-word!important;
    overflow-wrap:break-word!important;
    word-break:break-word!important
  }
}

.book>.titlepage:not(:last-child),
.chapter,
section[id] {
  padding-bottom:3.75rem
}
.book>.titlepage .chapter:last-child,
.book>.titlepage section[id]:last-child,
.chapter .chapter:last-child,
.chapter section[id]:last-child,
section[id] .chapter:last-child,
section[id] section[id]:last-child {
  margin-bottom:-3.75rem
}
.listingblock+section[id],
pre+section[id] {
  padding-top:3.75rem
}
.cta-link {
  font-size:inherit
}
a {
  word-wrap:break-word;
  overflow-wrap:break-word
}
.caution,
.important,
.note,
.tip,
.warning {
  padding:.8888888889em;
  position:relative
}
.caution {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.important {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.note {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.tip {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.warning {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.book>.titlepage,
.chapter,
section[id] {
  padding-bottom:var(--rh-space-4xl,64px)
}

.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.paragraph {
  margin:1.49963rem 0
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
dd {
  margin-bottom:2.5rem
}

.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}

.annotator-outer[class][class] {
  display:none;
  flex-direction:column;
  flex-grow:1;
  height:auto;
  margin:0;
  position:static;
  width:auto
}
@media (min-width:1400px) {
  .annotator-outer[class][class] {
    display:flex
  }
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
.title {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0;
  text-transform:none
}
.paragraph>.title[class]+.content>:first-child,
.paragraph>.title[class]+p,
p.title[class]+.content>:first-child,
p.title[class]+p {
  margin-top:0
}
[class] pre .caution,
[class] pre .important,
[class] pre .note,
[class] pre .tip,
[class] pre .warning {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
[class] pre .caution:after,
[class] pre .important:after,
[class] pre .note:after,
[class] pre .tip:after,
[class] pre .warning:after {
  content:none
}
[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}
[class] .author {
  margin-bottom:1.5rem
}
[class] .author .author {
  margin-bottom:0
}
table {
  margin:2rem 0
}
[class] table {
  width:auto
}
table .table-contents table {
  max-width:100%;
  overflow:auto
}
rh-table table {
  margin:0;
  max-width:9999em;
  overflow:visible
}
td,
th {
  border-left:0;
  padding:.5em 1rem;
  transition:background .25s ease-out
}
td.content--md[class][class],
th.content--md[class][class] {
  min-width:13em
}
td.content--lg[class][class],
th.content--lg[class][class] {
  min-width:20em
}
thead th {
  padding-top:1.5em
}
caption {
  color:currentColor;
  color:var(--pfe-table__caption--Color,currentColor);
  font-weight:700;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:center
}
.revhistory table td,
.revhistory table th {
  border-color:transparent
}
.revhistory table td {
  padding:.625rem .875rem
}
.revhistory table.simplelist {
  margin:0
}
@media print {
  #masthead {
    display:none!important
  }
}
.rh-table--is-full-screen #to-top {
  display:none
}
body {
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  background-color:white;
  font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);
  font-size:var(--rh-body-copy-lage,1.125rem);
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
rh-codeblock::slotted(#content) {
  border-radius:.25rem;
  padding:var (--rh-space-lg,16px)
}
rh-codeblock .screen {
  display:grid;
  grid-template-columns:1fr 4.375rem
}
rh-codeblock[class][class][class][class][class] {
  max-width:99999em
}
pre {
  border:0;
  max-height:-moz-max-content;
  max-height:max-content
}
pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
rh-code-block>div.codeblock__inner-wrapper>pre,
rh-code-block>div.codeblock__inner-wrapper>pre[class] {
  margin:0;
  padding:0;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.literal {
  background:#eee;
  border-radius:.25rem;
  color:#000;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
code.literal,
kbd,
span.keycap {
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace
}
kbd,
span.keycap {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
ol,
ul {
  margin:1rem 0;
  padding:0 0 0 1.5rem
}
._additional-resources[class][class],
._additional-resources[class][class][id]:last-child {
  background:#fff;
  border:.0625rem solid #d2d2d2;
  border-radius:.1875rem;
  margin:2em 0 4em;
  padding:2rem 2rem 1rem
}
._additional-resources[class][class] ul {
  border:0;
  list-style:none;
  margin:0;
  padding:0;
  position:relative
}
._additional-resources[class][class] li {
  border-bottom:.0625rem solid #d2d2d2;
  box-sizing:content-box;
  margin:0;
  padding:1rem 1.5rem 1rem 0;
  -moz-column-break-inside:avoid;
  break-inside:avoid
}
._additional-resources[class][class] li:last-child {
  border:0
}
section.section#additional_resource .additional-resources__heading,
section.section#additional_resource .heading,
section.section#additional_resource h1,
section.section#additional_resource h2,
section.section#additional_resource h3,
section.section#additional_resource h4,
section.section#additional_resource h5,
section.section#additional_resource h6,
section.section#additional_resource p.title {
  display:block;
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  font-weight:700;
  line-height:1.5rem;
  margin:0 0 .5rem;
  padding:0;
  text-transform:uppercase
}
section.section:first-of-type {
  margin-top:var(--rh-space-4xl,64px)
}
section.section p {
  margin-bottom:var(--rh-space-lg,16px);
  margin-top:0
}


dl {
  display:block;
  margin-block-end:1em;
  margin-block-start:1em;
  margin-inline-end:0;
  margin-inline-start:0
}
.paragraph {
  margin:1.49963rem 0
}
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.book[class] .author {
  margin-bottom:1.5rem
}
.book[class] .author .author {
  margin-bottom:0
}
.paragraph>.title[class],
p.title[class] {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0
}
.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}
code {
  background:#eee;
  color:#000;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
.book[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
dl {
  margin:1rem 0
}
dl dt {
  font-weight:600;
  margin:.5rem 0
}
ol ol {
  list-style:lower-roman
}
.codeblock--processed pf-clipboard-copy::part(input),
.codeblock--processed pf-clipboard-copy::part(span) {
  display:none
}
.token.tag {
  color:#c9190b
}

.admonitionblock {
  margin-bottom:var(--rh-space-lg,1rem)
}
.guibutton,
.guimenu,
.guimenuitem {
  font-weight:700
}
.guibutton {
  font-size:90%;
  padding:.1875rem
}
.guibutton:before {
  content:"["
}
.guibutton:after {
  content:"]"
}
.book,
{
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
pre[hidden] {
  display:none
}
.listingblock {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  margin:1rem 0;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0
}
nopre {
  display:block;
  font-size:.8125rem;
  line-height:1.42857;
  margin:0 0 .625rem;
  word-break:break-all;
  word-wrap:break-word;
  background-color:var(--rh-color-surface-lighter,#f2f2f2);
  border:.0625rem solid #ccc;
  border-radius:.25rem;
  color:#333
}
.book pre,
pre {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  color:#151515;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
pre[class] {
  line-height:1.6667;
  overflow-x:auto
}
*,
:after,
:before {
  box-sizing:border-box
}
:root {
  --rh-space-xs:4px;
  --rh-space-sm:6px;
  --rh-space-md:8px;
  --rh-space-lg:16px;
  --rh-space-xl:24px;
  --rh-space-2xl:32px;
  --rh-space-3xl:48px;
  --rh-space-4xl:64px;
  --rh-space-5xl:80px;
  --rh-space-6xl:96px;
  --rh-space-7xl:128px;
  --rh-font-size-body-text-xs:.75rem;
  --rh-font-size-body-text-sm:.875rem;
  --rh-font-size-body-text-md:1rem;
  --rh-font-size-body-text-lg:1.125rem;
  --rh-font-size-body-text-xl:1.25rem;
  --rh-font-size-body-text-2xl:1.5rem;
  --rh-font-size-heading-xs:1.25rem;
  --rh-font-size-heading-sm:1.5rem;
  --rh-font-size-heading-md:1.75rem;
  --rh-font-size-heading-lg:2.25rem;
  --rh-font-size-heading-xl:2.5rem;
  --rh-font-size-heading-2xl:3rem;
  --pfe-navigation--logo--maxWidth:200px;
  --pfe-navigation__logo--height:40px;
  --pfe-navigation--fade-transition-delay:.5s;
  --pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);
  --pf-global--icon--FontSize--sm:.75rem
}
body,
html {
  font-family:Red Hat Text,sans-serif;
  font-size:var(--rh-font-size-body-text-md,1rem);
  line-height:var(--rh-line-height-body-text,1.5);
}

main {
  line-height:30px
}
section {
  padding-bottom:3rem;
  padding-top:3rem
}
img {
  max-width:100%
}
a {
  color:var(--rh-color-interactive-blue-darker,#06c);
  text-decoration:underline
}
a:hover {
  color:var(--rh-color-interactive-blue-darkest,#004080)
}

@media (min-width:576px) {
  .book {
    max-width:540px
  }
}
@media (min-width:768px) {
  .book {
    max-width:720px
  }
}
@media (min-width:992px) {
  .book {
    max-width:1250px
  }
}
section {
  padding:0
}
.list-unstyled {
  list-style:none;
  padding-left:0
}
.doc-image-link {
  display:inline-block;
  text-decoration:none
}
.admonitionblock{
  margin-bottom:var(--rh-space-lg,1rem)
  font-size:var(--rh-font-size-body-text-md,1rem)
}
.admonitionblock table {
  margin:0;
  border:none;
  width:fit-content
}
.admonitionblock td {
  margin:0;
  border:none;
  display:block
}
.admonitionblock .title {
  margin:0;
  color:#002952;
  font-weight:700
}


</style>
</head>
<body id="enabling-authentication" class="book toc2 toc-left">
<div id="header">
<h1>Enabling authentication in Red Hat Developer Hub</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#authenticating-with-the-guest-user_title-authentication">Chapter 1. Authenticating with the Guest user</a>
<ul class="sectlevel2">
<li><a href="#authenticating-with-the-guest-user-on-an-operator-based-installation_title-authentication">1.1. Authenticating with the Guest user on an Operator-based installation</a></li>
<li><a href="#authenticating-with-the-guest-user-on-a-helm-based-installation_title-authentication">1.2. Authenticating with the Guest user on a Helm-based installation</a></li>
</ul>
</li>
<li><a href="#proc-adding-azure-as-an-authentication-provider_title-authentication">Chapter 2. Enabling the Microsoft Azure authentication provider</a></li>
<li><a href="#assembly-auth-provider-github">Chapter 3. Enabling the GitHub authentication provider</a>
<ul class="sectlevel2">
<li><a href="#con-github-app-overview">3.1. GitHub App​ overview</a></li>
<li><a href="#proc-registering-github-app">3.2. Registering a GitHub​ App</a></li>
<li><a href="#proc-configuring-github-app">3.3. Configuring a GitHub App in Developer Hub</a></li>
<li><a href="#proc-adding-github-to-frontend">3.4. Adding the GitHub provider to the Developer Hub front end​</a></li>
</ul>
</li>
<li><a href="#assembly-auth-provider-oidc">Chapter 4. Enabling the OpenID Connect authentication provider</a>
<ul class="sectlevel2">
<li><a href="#con-oidc-configration_title-authentication">4.1. Overview of using the OIDC authentication provider in Developer Hub</a></li>
<li><a href="#proc-configuring-keycloak-with-oidc_title-authentication">4.2. Configuring Keycloak with the OIDC authentication provider</a></li>
<li><a href="#proc-migrating-oauth2-proxy-to-oidc_title-authentication">4.3. Migrating from OAuth2 Proxy with Keycloak to OIDC in Developer Hub</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Authentication within Red Hat Developer Hub facilitates user sign-in, identification, and access to external resources.
It supports multiple authentication providers.</p>
</div>
<div class="paragraph">
<p>Authentication providers are typically used in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One provider for sign-in and identification.</p>
</li>
<li>
<p>Additional providers for accessing external resources.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Red Hat Developer Hub supports the following authentication providers:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Microsoft Azure</dt>
<dd>
<p><code>microsoft</code></p>
</dd>
<dt class="hdlist1">GitHub</dt>
<dd>
<p><code>github</code></p>
</dd>
<dt class="hdlist1">Keycloak</dt>
<dd>
<p><code>oidc</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For each provider that you want to use, follow the dedicated procedure to complete the following tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up the shared secret that the authentication provider and Red Hat Developer Hub require to communicate.</p>
</li>
<li>
<p>Configure Red Hat Developer Hub to use the authentication provider.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authenticating-with-the-guest-user_title-authentication">Chapter 1. Authenticating with the Guest user</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To explore Developer Hub features, you can skip configuring authentication and authorization.
You can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="sect2">
<h3 id="authenticating-with-the-guest-user-on-an-operator-based-installation_title-authentication">1.1. Authenticating with the Guest user on an Operator-based installation</h3>
<div class="paragraph">
<p>After an Operator-based installation, you can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="">installed Developer Hub by using the Operator</a>.</p>
</li>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-config-file-ocp-operator_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable the guest user in your Developer Hub custom configuration, <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-config-file-ocp-operator_admin-rhdh">edit your Developer Hub application configuration</a> with following content:</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: development
  providers:
    guest:
      dangerouslyAllowOutsideDevelopment: true</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>To log in with the Guest user account, click <strong>Enter</strong> in the <strong>Guest</strong> tile.</p>
</li>
<li>
<p>In the Developer Hub <strong>Settings</strong> page, your profile name is <strong>Guest</strong>.</p>
</li>
<li>
<p>You can use Developer Hub features.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="authenticating-with-the-guest-user-on-a-helm-based-installation_title-authentication">1.2. Authenticating with the Guest user on a Helm-based installation</h3>
<div class="paragraph">
<p>On a Helm-based installation, you can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3#Install%20and%20Upgrade">Installed Developer Hub by using the Helm Chart</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable the guest user in your Developer Hub custom configuration, <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-file-openshift-helm_admin-rhdh">configure your Red Hat Developer Hub Helm Chart</a> with following content:</p>
<div class="listingblock">
<div class="title">Red Hat Developer Hub Helm Chart configuration fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    appConfig:
      app:
        baseUrl: 'https://{{- include "janus-idp.hostname" . }}'
      auth:
        environment: development
        providers:
          guest:
            dangerouslyAllowOutsideDevelopment: true</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>To log in with the Guest user account, click <strong>Enter</strong> in the <strong>Guest</strong> tile.</p>
</li>
<li>
<p>In the Developer Hub <strong>Settings</strong> page, your profile name is <strong>Guest</strong>.</p>
</li>
<li>
<p>You can use Developer Hub features.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-adding-azure-as-an-authentication-provider_title-authentication">Chapter 2. Enabling the Microsoft Azure authentication provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Developer Hub includes a Microsoft Azure authentication provider that can authenticate users by using OAuth.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To allow Developer Hub to authenticate with Microsoft Azure, create an OAuth Application in Microsoft Azure.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to <a href="https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade"><strong>Azure Portal &gt; App registrations</strong></a>, and create an <strong>App Registration</strong> for Developer Hub.</p>
</li>
<li>
<p>On your <strong>App registration</strong> overview page, add a new <strong>Web platform configuration</strong>, with the configuration:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Redirect URI</strong></dt>
<dd>
<p>Enter the backend authentication URI set in Developer Hub: <code>https://<em>&lt;APP_FQDN&gt;</em>/api/auth/microsoft/handler/frame</code></p>
</dd>
<dt class="hdlist1"><strong>Front-channel logout URL</strong></dt>
<dd>
<p>Leave blank.</p>
</dd>
<dt class="hdlist1"><strong>Implicit grant and hybrid flows</strong></dt>
<dd>
<p>Leave all checkboxes cleared.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>On the <strong>API permissions</strong> tab, click <strong>Add Permission</strong>, then add the following <strong>Delegated permission</strong> for the
<strong>Microsoft Graph API</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><code>email</code></p>
</li>
<li>
<p><code>offline_access</code></p>
</li>
<li>
<p><code>openid</code></p>
</li>
<li>
<p><code>profile</code></p>
</li>
<li>
<p><code>User.Read</code></p>
</li>
<li>
<p>Optional custom scopes of the Microsoft Graph API that you define both here and in the Developer Hub configuration (<code>app-config-rhdh.yaml</code>).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Your company might require you to grant admin consent for these permissions.
Even if your company does not require admin consent, you might do so as it means users do not need to individually consent the first time they access backstage.
To grant admin consent, a directory admin must go to the <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/user-admin-consent-overview">admin consent</a> page and click <strong>Grant admin consent for COMPANY NAME</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Go to the <strong>Certificates &amp; Secrets</strong> page, then the <strong>Client secrets</strong> tab, and create a new client secret.
Save the <strong>Client secret</strong> for the next step.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Add your Microsoft Azure credentials in your Developer Hub secrets.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit your Developer Hub secrets, such as <code>secrets-rhdh</code>.</p>
</li>
<li>
<p>Add the following key/value pairs:</p>
<div class="ulist">
<ul>
<li>
<p><code>AUTH_AZURE_CLIENT_ID</code>: Enter the <strong>Application ID</strong> that you generated on Microsoft Azure.</p>
</li>
<li>
<p><code>AUTH_AZURE_CLIENT_SECRET</code>: Enter the <strong>Client secret</strong> that you generated on Microsoft Azure.</p>
</li>
<li>
<p><code>AUTH_AZURE_TENANT_ID</code>: Enter your <strong>Tenant ID</strong> on Microsoft Azure.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Set up the Microsoft Azure authentication provider in your Developer Hub custom configuration.</p>
<div class="paragraph">
<p>Edit your custom Developer Hub config map, such as <code>app-config-rhdh</code>.</p>
</div>
<div class="paragraph">
<p>In the <code>app-config-rhdh.yaml</code> content, add the <code>microsoft</code> provider configuration under the root <code>auth</code> configuration, and enable the <code>microsoft</code> provider for sign-in:</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        clientId: ${AUTH_AZURE_CLIENT_ID}
        clientSecret: ${AUTH_AZURE_CLIENT_SECRET}
        tenantId: ${AUTH_AZURE_TENANT_ID}
        # domainHint: ${AUTH_AZURE_TENANT_ID} # <b class="conum">(1)</b>
        # additionalScopes: # <b class="conum">(2)</b>
          # - Mail.Send
signInPage: microsoft # <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Optional for single-tenant applications. You can reduce login friction for users with accounts in multiple tenants by automatically filtering out accounts from other tenants. If you want to use this parameter for a single-tenant application, uncomment and enter the tenant ID. If your application registration is multi-tenant, leave this parameter blank. For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/home-realm-discovery-policy">Home Realm Discovery</a>.</p>
</li>
<li>
<p>Optional for additional scopes. To add scopes for the application registration, uncomment and enter the list of scopes that you want to add.
The default and mandatory value is <code>['user.read']</code>.</p>
</li>
<li>
<p>To enable the Microsoft Azure provider as default sign-in provider.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Optional for environments with restrictions on outgoing access, such as firewall rules. If your environment has outgoing access restrictions make sure your Backstage backend has access to the following hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>login.microsoftonline.com</code>: To get and exchange authorization codes and access tokens.</p>
</li>
<li>
<p><code>graph.microsoft.com</code>: To fetch user profile information (as seen in this source code).
If this host is unreachable, users might see an <em>Authentication failed, failed to fetch user profile</em> error when they attempt to log in.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-auth-provider-github">Chapter 3. Enabling the GitHub authentication provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Developer Hub uses a built-in GitHub authentication provider to authenticate users in GitHub or GitHub Enterprise.</p>
</div>
<div class="sect2">
<h3 id="con-github-app-overview">3.1. GitHub App​ overview</h3>
<div class="paragraph">
<p>GitHub Apps are generally preferred to OAuth apps because they use fine-grained permissions, give more control over which repositories the application can access, and use short-lived tokens. For more information, see <a href="https://docs.github.com/en/apps/overview">GitHub Apps overview</a> in the GitHub documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-registering-github-app">3.2. Registering a GitHub​ App</h3>
<div class="paragraph">
<p>In a GitHub App, you configure the allowed scopes as part of that application, therefore, you must verify the scope that your plugins require. The scope information is available in the plugin README files.</p>
</div>
<div class="paragraph">
<p>To add GitHub authentication, complete the steps in <a href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Registering a GitHub App</a> on the GitHub website.</p>
</div>
<div class="paragraph">
<p>Use the following examples to enter the information about your production environment into the required fields on the <strong>Register new GitHub App</strong> page:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application name: Red Hat Developer Hub</p>
</li>
<li>
<p>Homepage URL:  <code>https://developer-hub-&lt;NAMESPACE_NAME&gt;.&lt;KUBERNETES_ROUTE_HOST&gt;</code></p>
</li>
<li>
<p>Authorization callback URL: <code>https://developer-hub-&lt;NAMESPACE_NAME&gt;.&lt;KUBERNETES_ROUTE_HOST&gt;/api/auth/github/handler/frame</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The Homepage URL points to the Developer Hub front end, while the authorization callback URL points to the authentication provider backend.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="proc-configuring-github-app">3.3. Configuring a GitHub App in Developer Hub</h3>
<div class="paragraph">
<p>To add GitHub authentication for Developer Hub, you must configure the GitHub App in your <code>app-config.yaml</code> file.</p>
</div>
<div class="paragraph">
<p>The GitHub authentication provider uses the following configuration keys:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clientId</code>: the client ID that you generated on GitHub. For example: b59241722e3c3b4816e2</p>
</li>
<li>
<p><code>clientSecret</code>: the client secret tied to the generated client ID.</p>
</li>
<li>
<p><code>enterpriseInstanceUrl</code> (optional): the base URL for a GitHub Enterprise instance. For example: <code>https://ghe.&lt;company&gt;.com</code>. The <code>enterpriseInstanceUrl</code> is only needed for GitHub Enterprise.</p>
</li>
<li>
<p><code>callbackUrl</code> (optional): the callback URL that GitHub uses when initiating an OAuth flow. For example: https://your-intermediate-service.com/handler. The <code>callbackUrl</code> is only needed if Developer Hub is not the immediate receiver, such as in cases when you use one OAuth app for many Developer Hub instances.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To configure the GitHub App, add the provider configuration to your <code>app-config.yaml</code> file under the root auth configuration. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
 environment: production
 providers:
   github:
     production:
       clientId: ${GITHUB_APP_CLIENT_ID}
       clientSecret: ${GITHUB_APP_CLIENT_SECRET}
       ## uncomment if using GitHub Enterprise
       # enterpriseInstanceUrl: ${GITHUB_URL}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-adding-github-to-frontend">3.4. Adding the GitHub provider to the Developer Hub front end​</h3>
<div class="paragraph">
<p>To add the provider to the front end, add the sign in configuration to your <code>app-config.yaml</code> file. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">signInPage: github</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For information about authenticating Backstage access with GitHub, see <a href="https://backstage.io/docs/integrations/github/github-apps/">GitHub Authentication Provider</a> in the community documentation.</p>
</li>
<li>
<p>For information about adding the provider to the Backstage front end, see <a href="https://github.com/janus-idp/backstage-showcase/blob/main/showcase-docs/getting-started.md">Enabling authentication in Showcase</a> in the community documentation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-auth-provider-oidc">Chapter 4. Enabling the OpenID Connect authentication provider</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Developer Hub uses the OpenID Connect (OIDC) authentication provider to authenticate with third-party services that support the OIDC protocol.</p>
</div>
<div class="sect2">
<h3 id="con-oidc-configration_title-authentication">4.1. Overview of using the OIDC authentication provider in Developer Hub</h3>
<div class="paragraph">
<p>You can configure the OIDC authentication provider in Developer Hub by updating your <code>app-config.yaml</code> file under the root auth configuration. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  # Providing an auth.session.secret will enable session support in the auth-backend
  session:
    secret: ${SESSION_SECRET}
  providers:
    oidc:
      production:
        metadataUrl: ${AUTH_OIDC_METADATA_URL}
        clientId: ${AUTH_OIDC_CLIENT_ID}
        clientSecret: ${AUTH_OIDC_CLIENT_SECRET}
        prompt: ${AUTH_OIDC_PROMPT} # Recommended to use auto
        ## Uncomment for additional configuration options
        # callbackUrl: ${AUTH_OIDC_CALLBACK_URL}
        # tokenEndpointAuthMethod: ${AUTH_OIDC_TOKEN_ENDPOINT_METHOD}
        # tokenSignedResponseAlg: ${AUTH_OIDC_SIGNED_RESPONSE_ALG}
        # scope: ${AUTH_OIDC_SCOPE}
        ## Declarative resolvers to override the default resolver: `emailLocalPartMatchingUserEntityName`
        ## The authentication provider tries each sign-in resolver until it succeeds, and fails if none succeed. Uncomment the resolvers that you want to use.
        # signIn:
        #   resolvers:
        #     - resolver: preferredUsernameMatchingUserEntityName
        #     - resolver: emailMatchingUserEntityProfileEmail
        #     - resolver: emailLocalPartMatchingUserEntityName
signInPage: oidc</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-configuring-keycloak-with-oidc_title-authentication">4.2. Configuring Keycloak with the OIDC authentication provider</h3>
<div class="paragraph">
<p>Red Hat Developer Hub includes an OIDC authentication provider that can authenticate users by using Keycloak.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The user that you create in Keycloak must also be available in the Developer Hub catalog.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In Keycloak, create a new realm, for example <code>RHDH</code>.</p>
</li>
<li>
<p>Add a new user.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Username</strong></dt>
<dd>
<p>Username for the user, for example: <code>rhdhuser</code></p>
</dd>
<dt class="hdlist1"><strong>Email</strong></dt>
<dd>
<p>Email address of the user.</p>
</dd>
<dt class="hdlist1"><strong>First name</strong></dt>
<dd>
<p>First name of the user.</p>
</dd>
<dt class="hdlist1"><strong>Last name</strong></dt>
<dd>
<p>Last name of the user.</p>
</dd>
<dt class="hdlist1"><strong>Email verified</strong></dt>
<dd>
<p>Toggle to <strong>On</strong>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>Navigate to the <strong>Credentials</strong> tab.</p>
</li>
<li>
<p>Click <strong>Set password</strong>.</p>
</li>
<li>
<p>Enter the <strong>Password</strong> for the user account and toggle <strong>Temporary</strong> to <strong>Off</strong>.</p>
</li>
<li>
<p>Create a new Client ID, for example, <code>RHDH</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Client authentication</strong></dt>
<dd>
<p>Toggle to <strong>On</strong>.</p>
</dd>
<dt class="hdlist1"><strong>Valid redirect URIs</strong></dt>
<dd>
<p>Set to the OIDC handler URL, for example, <code><a href="https://&lt;RHDH_URL&gt;/api/auth/oidc/handler/frame" class="bare">https://&lt;RHDH_URL&gt;/api/auth/oidc/handler/frame</a></code>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Navigate to the <strong>Credentials</strong> tab and copy the <strong>Client secret</strong>.</p>
</li>
<li>
<p>Save the Client ID and the Client Secret for the next step.</p>
</li>
<li>
<p>In Developer Hub, add your Keycloak credentials in your Developer Hub secrets.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit your Developer Hub secrets, such as secrets-rhdh.</p>
</li>
<li>
<p>Add the following key/value pairs:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AUTH_KEYCLOAK_CLIENT_ID</code></dt>
<dd>
<p>Enter the Client ID that you generated in Keycloak, such as <code>RHDH</code>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_KEYCLOAK_CLIENT_SECRET</code></dt>
<dd>
<p>Enter the Client Secret that you generated in Keycloak.</p>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Set up the OIDC authentication provider in your Developer Hub custom configuration.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Edit your custom Developer Hub ConfigMap, such as <code>app-config-rhdh</code>.</p>
</li>
<li>
<p>In the <code>app-config-rhdh.yaml</code> content, add the <code>oidc</code> provider configuration under the root <code>auth</code> configuration, and enable the <code>oidc</code> provider for sign-in:</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    oidc:
      production:
      clientId: ${AUTH_KEYCLOAK_CLIENT_ID}
      clientSecret: ${AUTH_KEYCLOAK_CLIENT_SECRET}
      metadataUrl: ${KEYCLOAK_BASE_URL}/auth/realms/${KEYCLOAK_REALM}
      prompt: ${KEYCLOAK_PROMPT} # recommended to use auto
      <mark> Uncomment for additional configuration options
      #callbackUrl: ${KEYCLOAK_CALLBACK_URL}
      #tokenEndpointAuthMethod: ${KEYCLOAK_TOKEN_ENDPOINT_METHOD}
      #tokenSignedResponseAlg: ${KEYCLOAK_SIGNED_RESPONSE_ALG}
      #scope: ${KEYCLOAK_SCOPE}
      </mark> If you are using the keycloak-backend plugin, use the <code>preferredUsernameMatchingUserEntityName</code> resolver to avoid a login error.
      signIn:
        resolvers:
          - resolver: preferredUsernameMatchingUserEntityName
signInPage: oidc</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Restart your <code>backstage-developer-hub</code> application to apply the changes.</p>
</li>
<li>
<p>Your Developer Hub sign-in page displays <strong>Sign in using OIDC</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-migrating-oauth2-proxy-to-oidc_title-authentication">4.3. Migrating from OAuth2 Proxy with Keycloak to OIDC in Developer Hub</h3>
<div class="paragraph">
<p>If you are using OAuth2 Proxy as an authentication provider with Keycloak, and you want to migrate to OIDC, you can update your authentication provider configuration to use OIDC.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In Keycloak, update the valid redirect URI to <code><a href="https://&lt;rhdh_url&gt;/api/auth/oidc/handler/frame" class="bare">https://&lt;rhdh_url&gt;/api/auth/oidc/handler/frame</a></code>. Make sure to replace <code>&lt;rhdh_url&gt;</code> with your Developer Hub application URL, such as, <code>my.rhdh.example.com</code>.</p>
</li>
<li>
<p>Replace the <code>oauth2Proxy</code> configuration values in the <code>auth</code> section of your <code>app-config.yaml</code> file with the <code>oidc</code> configuration values.</p>
</li>
<li>
<p>Update the <code>signInPage</code> configuration value from <code>oauth2Proxy</code> to <code>oidc</code>.</p>
<div class="paragraph">
<p>The following example shows the <code>auth.providers</code> and <code>signInPage</code> configuration for <code>oauth2Proxy</code> prior to migrating the authentication provider to <code>oidc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  session:
    secret: ${SESSION_SECRET}
  providers:
    oauth2Proxy: {}
signInPage: oauth2Proxy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>auth.providers</code> and <code>signInPage</code> configuration after migrating the authentication provider to <code>oidc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  session:
    secret: ${SESSION_SECRET}
  providers:
    oidc:
      production:
        metadataUrl: ${KEYCLOAK_METADATA_URL}
        clientId: ${KEYCLOAK_CLIENT_ID}
        clientSecret: ${KEYCLOAK_CLIENT_SECRET}
        prompt: ${KEYCLOAK_PROMPT} # recommended to use auto
signInPage: oidc</code></pre>
</div>
</div>
</li>
<li>
<p>Remove the OAuth2 Proxy sidecar container and update the <code>upstream.service</code> section of your Helm chart’s <code>values.yaml</code> file as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>service.ports.backend</code>: <code>7007</code></p>
</li>
<li>
<p><code>service.ports.targetPort</code>: <code>backend</code></p>
<div class="paragraph">
<p>The following example shows the <code>service</code> configuration for <code>oauth2Proxy</code> prior to migrating the authentication provider to <code>oidc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">service:
  ports:
    name: http-backend
    backend: 4180
    targetPort: oauth2Proxy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>service</code> configuration after migrating the authentication provider to <code>oidc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">service:
  ports:
    name: http-backend
    backend: 7007
    targetPort: backend</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Upgrade the Developer Hub Helm chart.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-09-23 14:10:27 UTC
</div>
</div>
</body>
</html>